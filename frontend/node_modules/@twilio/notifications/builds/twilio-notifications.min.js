/*
@license
The MIT License (MIT)

Copyright (c) 2016 Twilio Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

*/
this.Twilio=this.Twilio||{},this.Twilio.Notifications=function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var r=function(t){return t&&t.Math==Math&&t},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),i={},a=function(t){try{return!!t()}catch(t){return!0}},s=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={},u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,l=f&&!u.call({1:2},1);c.f=l?function(t){var e=f(this,t);return!!e&&e.enumerable}:u;var d,p,h=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v={}.toString,y=function(t){return v.call(t).slice(8,-1)},g=y,m="".split,b=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==g(t)?m.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},x=b,k=w,S=function(t){return x(k(t))},T=function(t){return"object"==typeof t?null!==t:"function"==typeof t},E=o,O=function(t){return"function"==typeof t?t:void 0},_=function(t,e){return arguments.length<2?O(E[t]):E[t]&&E[t][e]},A=_("navigator","userAgent")||"",R=o,C=A,I=R.process,P=R.Deno,j=I&&I.versions||P&&P.version,L=j&&j.v8;L?p=(d=L.split("."))[0]<4?1:d[0]+d[1]:C&&(!(d=C.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=C.match(/Chrome\/(\d+)/))&&(p=d[1]);var M=p&&+p,N=M,D=a,B=!!Object.getOwnPropertySymbols&&!D((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&N&&N<41})),F=B&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,U=_,W=F?function(t){return"symbol"==typeof t}:function(t){var e=U("Symbol");return"function"==typeof e&&Object(t)instanceof e},z=T,G={exports:{}},$=o,V=function(t,e){try{Object.defineProperty($,t,{value:e,configurable:!0,writable:!0})}catch(n){$[t]=e}return e},K=V,q="__core-js_shared__",Y=o[q]||K(q,{}),X=Y;(G.exports=function(t,e){return X[t]||(X[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.17.3",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var J=w,H=function(t){return Object(J(t))},Z=H,Q={}.hasOwnProperty,tt=Object.hasOwn||function(t,e){return Q.call(Z(t),e)},et=0,nt=Math.random(),rt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++et+nt).toString(36)},ot=o,it=G.exports,at=tt,st=rt,ct=B,ut=F,ft=it("wks"),lt=ot.Symbol,dt=ut?lt:lt&&lt.withoutSetter||st,pt=function(t){return at(ft,t)&&(ct||"string"==typeof ft[t])||(ct&&at(lt,t)?ft[t]=lt[t]:ft[t]=dt("Symbol."+t)),ft[t]},ht=T,vt=W,yt=function(t,e){var n,r;if("string"===e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!z(r=n.call(t)))return r;if("string"!==e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},gt=pt("toPrimitive"),mt=function(t,e){if(!ht(t)||vt(t))return t;var n,r=t[gt];if(void 0!==r){if(void 0===e&&(e="default"),n=r.call(t,e),!ht(n)||vt(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),yt(t,e)},bt=mt,wt=W,xt=function(t){var e=bt(t,"string");return wt(e)?e:String(e)},kt=T,St=o.document,Tt=kt(St)&&kt(St.createElement),Et=function(t){return Tt?St.createElement(t):{}},Ot=Et,_t=!s&&!a((function(){return 7!=Object.defineProperty(Ot("div"),"a",{get:function(){return 7}}).a})),At=s,Rt=c,Ct=h,It=S,Pt=xt,jt=tt,Lt=_t,Mt=Object.getOwnPropertyDescriptor;i.f=At?Mt:function(t,e){if(t=It(t),e=Pt(e),Lt)try{return Mt(t,e)}catch(t){}if(jt(t,e))return Ct(!Rt.f.call(t,e),t[e])};var Nt={},Dt=T,Bt=function(t){if(!Dt(t))throw TypeError(String(t)+" is not an object");return t},Ft=s,Ut=_t,Wt=Bt,zt=xt,Gt=Object.defineProperty;Nt.f=Ft?Gt:function(t,e,n){if(Wt(t),e=zt(e),Wt(n),Ut)try{return Gt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var $t=Nt,Vt=h,Kt=s?function(t,e,n){return $t.f(t,e,Vt(1,n))}:function(t,e,n){return t[e]=n,t},qt={exports:{}},Yt=Y,Xt=Function.toString;"function"!=typeof Yt.inspectSource&&(Yt.inspectSource=function(t){return Xt.call(t)});var Jt,Ht,Zt,Qt=Yt.inspectSource,te=Qt,ee=o.WeakMap,ne="function"==typeof ee&&/native code/.test(te(ee)),re=G.exports,oe=rt,ie=re("keys"),ae=function(t){return ie[t]||(ie[t]=oe(t))},se={},ce=ne,ue=T,fe=Kt,le=tt,de=Y,pe=ae,he=se,ve="Object already initialized",ye=o.WeakMap;if(ce||de.state){var ge=de.state||(de.state=new ye),me=ge.get,be=ge.has,we=ge.set;Jt=function(t,e){if(be.call(ge,t))throw new TypeError(ve);return e.facade=t,we.call(ge,t,e),e},Ht=function(t){return me.call(ge,t)||{}},Zt=function(t){return be.call(ge,t)}}else{var xe=pe("state");he[xe]=!0,Jt=function(t,e){if(le(t,xe))throw new TypeError(ve);return e.facade=t,fe(t,xe,e),e},Ht=function(t){return le(t,xe)?t[xe]:{}},Zt=function(t){return le(t,xe)}}var ke={set:Jt,get:Ht,has:Zt,enforce:function(t){return Zt(t)?Ht(t):Jt(t,{})},getterFor:function(t){return function(e){var n;if(!ue(e)||(n=Ht(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Se=o,Te=Kt,Ee=tt,Oe=V,_e=Qt,Ae=ke.get,Re=ke.enforce,Ce=String(String).split("String");(qt.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||Ee(n,"name")||Te(n,"name",e),(o=Re(n)).source||(o.source=Ce.join("string"==typeof e?e:""))),t!==Se?(i?!s&&t[e]&&(a=!0):delete t[e],a?t[e]=n:Te(t,e,n)):a?t[e]=n:Oe(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Ae(this).source||_e(this)}));var Ie={},Pe=Math.ceil,je=Math.floor,Le=function(t){return isNaN(t=+t)?0:(t>0?je:Pe)(t)},Me=Le,Ne=Math.min,De=function(t){return t>0?Ne(Me(t),9007199254740991):0},Be=Le,Fe=Math.max,Ue=Math.min,We=function(t,e){var n=Be(t);return n<0?Fe(n+e,0):Ue(n,e)},ze=S,Ge=De,$e=We,Ve=function(t){return function(e,n,r){var o,i=ze(e),a=Ge(i.length),s=$e(r,a);if(t&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===n)return t||s||0;return!t&&-1}},Ke={includes:Ve(!0),indexOf:Ve(!1)},qe=tt,Ye=S,Xe=Ke.indexOf,Je=se,He=function(t,e){var n,r=Ye(t),o=0,i=[];for(n in r)!qe(Je,n)&&qe(r,n)&&i.push(n);for(;e.length>o;)qe(r,n=e[o++])&&(~Xe(i,n)||i.push(n));return i},Ze=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qe=He,tn=Ze.concat("length","prototype");Ie.f=Object.getOwnPropertyNames||function(t){return Qe(t,tn)};var en={};en.f=Object.getOwnPropertySymbols;var nn=Ie,rn=en,on=Bt,an=_("Reflect","ownKeys")||function(t){var e=nn.f(on(t)),n=rn.f;return n?e.concat(n(t)):e},sn=tt,cn=an,un=i,fn=Nt,ln=function(t,e){for(var n=cn(e),r=fn.f,o=un.f,i=0;i<n.length;i++){var a=n[i];sn(t,a)||r(t,a,o(e,a))}},dn=a,pn=/#|\.prototype\./,hn=function(t,e){var n=yn[vn(t)];return n==mn||n!=gn&&("function"==typeof e?dn(e):!!e)},vn=hn.normalize=function(t){return String(t).replace(pn,".").toLowerCase()},yn=hn.data={},gn=hn.NATIVE="N",mn=hn.POLYFILL="P",bn=hn,wn=o,xn=i.f,kn=Kt,Sn=qt.exports,Tn=V,En=ln,On=bn,_n=function(t,e){var n,r,o,i,a,s=t.target,c=t.global,u=t.stat;if(n=c?wn:u?wn[s]||Tn(s,{}):(wn[s]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=xn(n,r))&&a.value:n[r],!On(c?r:s+(u?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;En(i,o)}(t.sham||o&&o.sham)&&kn(i,"sham",!0),Sn(n,r,i,t)}},An=Nt.f,Rn=tt,Cn=pt("toStringTag"),In=function(t,e,n){t&&!Rn(t=n?t:t.prototype,Cn)&&An(t,Cn,{configurable:!0,value:e})},Pn=o,jn=In;_n({global:!0},{Reflect:{}}),jn(Pn.Reflect,"Reflect",!0);var Ln,Mn=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Nn=He,Dn=Ze,Bn=Object.keys||function(t){return Nn(t,Dn)},Fn=Nt,Un=Bt,Wn=Bn,zn=s?Object.defineProperties:function(t,e){Un(t);for(var n,r=Wn(e),o=r.length,i=0;o>i;)Fn.f(t,n=r[i++],e[n]);return t},Gn=_("document","documentElement"),$n=Bt,Vn=zn,Kn=Ze,qn=se,Yn=Gn,Xn=Et,Jn=ae("IE_PROTO"),Hn=function(){},Zn=function(t){return"<script>"+t+"</"+"script>"},Qn=function(t){t.write(Zn("")),t.close();var e=t.parentWindow.Object;return t=null,e},tr=function(){try{Ln=new ActiveXObject("htmlfile")}catch(t){}var t,e;tr="undefined"!=typeof document?document.domain&&Ln?Qn(Ln):((e=Xn("iframe")).style.display="none",Yn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Zn("document.F=Object")),t.close(),t.F):Qn(Ln);for(var n=Kn.length;n--;)delete tr.prototype[Kn[n]];return tr()};qn[Jn]=!0;var er=Object.create||function(t,e){var n;return null!==t?(Hn.prototype=$n(t),n=new Hn,Hn.prototype=null,n[Jn]=t):n=tr(),void 0===e?n:Vn(n,e)},nr=Mn,rr=T,or=[].slice,ir={},ar=function(t,e,n){if(!(e in ir)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";ir[e]=Function("C,a","return new C("+r.join(",")+")")}return ir[e](t,n)},sr=Function.bind||function(t){var e=nr(this),n=or.call(arguments,1),r=function(){var o=n.concat(or.call(arguments));return this instanceof r?ar(e,o.length,o):e.apply(t,o)};return rr(e.prototype)&&(r.prototype=e.prototype),r},cr=_n,ur=Mn,fr=Bt,lr=T,dr=er,pr=sr,hr=a,vr=_("Reflect","construct"),yr=hr((function(){function t(){}return!(vr((function(){}),[],t)instanceof t)})),gr=!hr((function(){vr((function(){}))})),mr=yr||gr;function br(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function wr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){br(i,r,o,a,s,"next",t)}function s(t){br(i,r,o,a,s,"throw",t)}a(void 0)}))}}function xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sr(t,e,n){return e&&kr(t.prototype,e),n&&kr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tr(t,e){return Tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Tr(t,e)}function Er(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tr(t,e)}function Or(t){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Or(t)}function _r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ar(t,e){if(e&&("object"===Or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _r(t)}function Rr(t){return Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rr(t)}cr({target:"Reflect",stat:!0,forced:mr,sham:mr},{construct:function(t,e){ur(t),fr(e);var n=arguments.length<3?t:ur(arguments[2]);if(gr&&!yr)return vr(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(pr.apply(t,r))}var o=n.prototype,i=dr(lr(o)?o:Object.prototype),a=Function.apply.call(t,i,e);return lr(a)?a:i}});var Cr,Ir=Object.prototype,Pr=Ir.hasOwnProperty,jr="function"==typeof Symbol?Symbol:{},Lr=jr.iterator||"@@iterator",Mr=jr.asyncIterator||"@@asyncIterator",Nr=jr.toStringTag||"@@toStringTag";function Dr(t,e,n,r){var o=e&&e.prototype instanceof $r?e:$r,i=Object.create(o.prototype),a=new ro(r||[]);return i._invoke=function(t,e,n){var r=Fr;return function(o,i){if(r===Wr)throw new Error("Generator is already running");if(r===zr){if("throw"===o)throw i;return io()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=to(a,n);if(s){if(s===Gr)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===Fr)throw r=zr,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=Wr;var c=Br(t,e,n);if("normal"===c.type){if(r=n.done?zr:Ur,c.arg===Gr)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=zr,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function Br(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}var Fr="suspendedStart",Ur="suspendedYield",Wr="executing",zr="completed",Gr={};function $r(){}function Vr(){}function Kr(){}var qr={};qr[Lr]=function(){return this};var Yr=Object.getPrototypeOf,Xr=Yr&&Yr(Yr(oo([])));Xr&&Xr!==Ir&&Pr.call(Xr,Lr)&&(qr=Xr);var Jr=Kr.prototype=$r.prototype=Object.create(qr);function Hr(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function Zr(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===Vr||"GeneratorFunction"===(e.displayName||e.name))}function Qr(t,e){function n(r,o,i,a){var s=Br(t[r],t,o);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"===Or(u)&&Pr.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(u).then((function(t){c.value=t,i(c)}),(function(t){return n("throw",t,i,a)}))}a(s.arg)}var r;this._invoke=function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}}function to(t,e){var n=t.iterator[e.method];if(n===Cr){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=Cr,to(t,e),"throw"===e.method))return Gr;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return Gr}var r=Br(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,Gr;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=Cr),e.delegate=null,Gr):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,Gr)}function eo(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function no(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function ro(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(eo,this),this.reset(!0)}function oo(t){if(t){var e=t[Lr];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(Pr.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=Cr,e.done=!0,e};return r.next=r}}return{next:io}}function io(){return{value:Cr,done:!0}}Vr.prototype=Jr.constructor=Kr,Kr.constructor=Vr,Kr[Nr]=Vr.displayName="GeneratorFunction",Hr(Qr.prototype),Qr.prototype[Mr]=function(){return this},Hr(Jr),Jr[Nr]="Generator",Jr[Lr]=function(){return this},Jr.toString=function(){return"[object Generator]"},ro.prototype={constructor:ro,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=Cr,this.done=!1,this.delegate=null,this.method="next",this.arg=Cr,this.tryEntries.forEach(no),!t)for(var e in this)"t"===e.charAt(0)&&Pr.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=Cr)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=Cr),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=Pr.call(o,"catchLoc"),s=Pr.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&Pr.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,Gr):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),Gr},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),no(n),Gr}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;no(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:oo(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=Cr),Gr}};var ao={wrap:Dr,isGeneratorFunction:Zr,AsyncIterator:Qr,mark:function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,Kr):(t.__proto__=Kr,Nr in t||(t[Nr]="GeneratorFunction")),t.prototype=Object.create(Jr),t},awrap:function(t){return{__await:t}},async:function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new Qr(Dr(t,e,n,r),o);return Zr(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},keys:function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},values:oo},so=Object.freeze({__proto__:null,default:ao}),co=er,uo=Nt,fo=pt("unscopables"),lo=Array.prototype;null==lo[fo]&&uo.f(lo,fo,{configurable:!0,value:co(null)});var po,ho,vo,yo=function(t){lo[fo][t]=!0},go={},mo=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),bo=tt,wo=H,xo=mo,ko=ae("IE_PROTO"),So=Object.prototype,To=xo?Object.getPrototypeOf:function(t){return t=wo(t),bo(t,ko)?t[ko]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?So:null},Eo=a,Oo=To,_o=Kt,Ao=pt("iterator"),Ro=!1;[].keys&&("next"in(vo=[].keys())?(ho=Oo(Oo(vo)))!==Object.prototype&&(po=ho):Ro=!0);var Co=null==po||Eo((function(){var t={};return po[Ao].call(t)!==t}));Co&&(po={}),"function"!=typeof po[Ao]&&_o(po,Ao,(function(){return this}));var Io={IteratorPrototype:po,BUGGY_SAFARI_ITERATORS:Ro},Po=Io.IteratorPrototype,jo=er,Lo=h,Mo=In,No=go,Do=function(){return this},Bo=T,Fo=Bt,Uo=function(t){if(!Bo(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},Wo=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Fo(n),Uo(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),zo=_n,Go=function(t,e,n){var r=e+" Iterator";return t.prototype=jo(Po,{next:Lo(1,n)}),Mo(t,r,!1),No[r]=Do,t},$o=To,Vo=Wo,Ko=In,qo=Kt,Yo=qt.exports,Xo=go,Jo=Io.IteratorPrototype,Ho=Io.BUGGY_SAFARI_ITERATORS,Zo=pt("iterator"),Qo="keys",ti="values",ei="entries",ni=function(){return this},ri=function(t,e,n,r,o,i,a){Go(n,e,r);var s,c,u,f=function(t){if(t===o&&v)return v;if(!Ho&&t in p)return p[t];switch(t){case Qo:case ti:case ei:return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",d=!1,p=t.prototype,h=p[Zo]||p["@@iterator"]||o&&p[o],v=!Ho&&h||f(o),y="Array"==e&&p.entries||h;if(y&&(s=$o(y.call(new t)))!==Object.prototype&&s.next&&($o(s)!==Jo&&(Vo?Vo(s,Jo):"function"!=typeof s[Zo]&&qo(s,Zo,ni)),Ko(s,l,!0)),o==ti&&h&&h.name!==ti&&(d=!0,v=function(){return h.call(this)}),p[Zo]!==v&&qo(p,Zo,v),Xo[e]=v,o)if(c={values:f(ti),keys:i?v:f(Qo),entries:f(ei)},a)for(u in c)(Ho||d||!(u in p))&&Yo(p,u,c[u]);else zo({target:e,proto:!0,forced:Ho||d},c);return c},oi=S,ii=yo,ai=go,si=ke,ci=ri,ui="Array Iterator",fi=si.set,li=si.getterFor(ui),di=ci(Array,"Array",(function(t,e){fi(this,{type:ui,target:oi(t),index:0,kind:e})}),(function(){var t=li(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");ai.Arguments=ai.Array,ii("keys"),ii("values"),ii("entries");var pi={exports:{}},hi={},vi=S,yi=Ie.f,gi={}.toString,mi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];hi.f=function(t){return mi&&"[object Window]"==gi.call(t)?function(t){try{return yi(t)}catch(t){return mi.slice()}}(t):yi(vi(t))};var bi=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),wi=_n,xi=se,ki=T,Si=tt,Ti=Nt.f,Ei=Ie,Oi=hi,_i=bi,Ai=!1,Ri=rt("meta"),Ci=0,Ii=Object.isExtensible||function(){return!0},Pi=function(t){Ti(t,Ri,{value:{objectID:"O"+Ci++,weakData:{}}})},ji=pi.exports={enable:function(){ji.enable=function(){},Ai=!0;var t=Ei.f,e=[].splice,n={};n[Ri]=1,t(n).length&&(Ei.f=function(n){for(var r=t(n),o=0,i=r.length;o<i;o++)if(r[o]===Ri){e.call(r,o,1);break}return r},wi({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Oi.f}))},fastKey:function(t,e){if(!ki(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Si(t,Ri)){if(!Ii(t))return"F";if(!e)return"E";Pi(t)}return t[Ri].objectID},getWeakData:function(t,e){if(!Si(t,Ri)){if(!Ii(t))return!0;if(!e)return!1;Pi(t)}return t[Ri].weakData},onFreeze:function(t){return _i&&Ai&&Ii(t)&&!Si(t,Ri)&&Pi(t),t}};xi[Ri]=!0;var Li=go,Mi=pt("iterator"),Ni=Array.prototype,Di=function(t){return void 0!==t&&(Li.Array===t||Ni[Mi]===t)},Bi=Mn,Fi=function(t,e,n){if(Bi(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Ui={};Ui[pt("toStringTag")]="z";var Wi="[object z]"===String(Ui),zi=Wi,Gi=y,$i=pt("toStringTag"),Vi="Arguments"==Gi(function(){return arguments}()),Ki=zi?Gi:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),$i))?n:Vi?Gi(e):"Object"==(r=Gi(e))&&"function"==typeof e.callee?"Arguments":r},qi=Ki,Yi=go,Xi=pt("iterator"),Ji=function(t){if(null!=t)return t[Xi]||t["@@iterator"]||Yi[qi(t)]},Hi=Bt,Zi=Ji,Qi=function(t,e){var n=arguments.length<2?Zi(t):e;if("function"!=typeof n)throw TypeError(String(t)+" is not iterable");return Hi(n.call(t))},ta=Bt,ea=function(t,e,n){var r,o;ta(t);try{if(void 0===(r=t.return)){if("throw"===e)throw n;return n}r=r.call(t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return ta(r),n},na=Bt,ra=Di,oa=De,ia=Fi,aa=Qi,sa=Ji,ca=ea,ua=function(t,e){this.stopped=t,this.result=e},fa=function(t,e,n){var r,o,i,a,s,c,u,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),h=ia(e,f,1+l+p),v=function(t){return r&&ca(r,"normal",t),new ua(!0,t)},y=function(t){return l?(na(t),p?h(t[0],t[1],v):h(t[0],t[1])):p?h(t,v):h(t)};if(d)r=t;else{if("function"!=typeof(o=sa(t)))throw TypeError("Target is not iterable");if(ra(o)){for(i=0,a=oa(t.length);a>i;i++)if((s=y(t[i]))&&s instanceof ua)return s;return new ua(!1)}r=aa(t,o)}for(c=r.next;!(u=c.call(r)).done;){try{s=y(u.value)}catch(t){ca(r,"throw",t)}if("object"==typeof s&&s&&s instanceof ua)return s}return new ua(!1)},la=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},da=pt("iterator"),pa=!1;try{var ha=0,va={next:function(){return{done:!!ha++}},return:function(){pa=!0}};va[da]=function(){return this},Array.from(va,(function(){throw 2}))}catch(t){}var ya=function(t,e){if(!e&&!pa)return!1;var n=!1;try{var r={};r[da]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},ga=T,ma=Wo,ba=function(t,e,n){var r,o;return ma&&"function"==typeof(r=e.constructor)&&r!==n&&ga(o=r.prototype)&&o!==n.prototype&&ma(t,o),t},wa=_n,xa=o,ka=bn,Sa=qt.exports,Ta=pi.exports,Ea=fa,Oa=la,_a=T,Aa=a,Ra=ya,Ca=In,Ia=ba,Pa=function(t,e,n){var r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=r?"set":"add",a=xa[t],s=a&&a.prototype,c=a,u={},f=function(t){var e=s[t];Sa(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!_a(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!_a(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!_a(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(ka(t,"function"!=typeof a||!(o||s.forEach&&!Aa((function(){(new a).entries().next()})))))c=n.getConstructor(e,t,r,i),Ta.enable();else if(ka(t,!0)){var l=new c,d=l[i](o?{}:-0,1)!=l,p=Aa((function(){l.has(1)})),h=Ra((function(t){new a(t)})),v=!o&&Aa((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));h||((c=e((function(e,n){Oa(e,c,t);var o=Ia(new a,e,c);return null!=n&&Ea(n,o[i],{that:o,AS_ENTRIES:r}),o}))).prototype=s,s.constructor=c),(p||v)&&(f("delete"),f("has"),r&&f("get")),(v||d)&&f(i),o&&s.clear&&delete s.clear}return u[t]=c,wa({global:!0,forced:c!=a},u),Ca(c,t),o||n.setStrong(c,t,r),c},ja=qt.exports,La=function(t,e,n){for(var r in e)ja(t,r,e[r],n);return t},Ma=_,Na=Nt,Da=s,Ba=pt("species"),Fa=function(t){var e=Ma(t),n=Na.f;Da&&e&&!e[Ba]&&n(e,Ba,{configurable:!0,get:function(){return this}})},Ua=Nt.f,Wa=er,za=La,Ga=Fi,$a=la,Va=fa,Ka=ri,qa=Fa,Ya=s,Xa=pi.exports.fastKey,Ja=ke.set,Ha=ke.getterFor,Za={getConstructor:function(t,e,n,r){var o=t((function(t,i){$a(t,o,e),Ja(t,{type:e,index:Wa(null),first:void 0,last:void 0,size:0}),Ya||(t.size=0),null!=i&&Va(i,t[r],{that:t,AS_ENTRIES:n})})),i=Ha(e),a=function(t,e,n){var r,o,a=i(t),c=s(t,e);return c?c.value=n:(a.last=c={index:o=Xa(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=c),r&&(r.next=c),Ya?a.size++:t.size++,"F"!==o&&(a.index[o]=c)),t},s=function(t,e){var n,r=i(t),o=Xa(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return za(o.prototype,{clear:function(){for(var t=i(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,Ya?t.size=0:this.size=0},delete:function(t){var e=this,n=i(e),r=s(e,t);if(r){var o=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=o),o&&(o.previous=a),n.first==r&&(n.first=o),n.last==r&&(n.last=a),Ya?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=i(this),r=Ga(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),za(o.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),Ya&&Ua(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=Ha(e),i=Ha(r);Ka(t,e,(function(t,e){Ja(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),qa(e)}};Pa("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Za);var Qa=Ki,ts=Wi?{}.toString:function(){return"[object "+Qa(this)+"]"},es=Wi,ns=qt.exports,rs=ts;es||ns(Object.prototype,"toString",rs,{unsafe:!0});var os=W,is=function(t){if(os(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},as=Le,ss=is,cs=w,us=function(t){return function(e,n){var r,o,i=ss(cs(e)),a=as(n),s=i.length;return a<0||a>=s?t?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):r:t?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},fs={codeAt:us(!1),charAt:us(!0)},ls=fs.charAt,ds=is,ps=ke,hs=ri,vs="String Iterator",ys=ps.set,gs=ps.getterFor(vs);hs(String,"String",(function(t){ys(this,{type:vs,string:ds(t),index:0})}),(function(){var t,e=gs(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=ls(n,r),e.index+=t.length,{value:t,done:!1})}));var ms={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},bs=Et("span").classList,ws=bs&&bs.constructor&&bs.constructor.prototype,xs=ws===Object.prototype?void 0:ws,ks=o,Ss=ms,Ts=xs,Es=di,Os=Kt,_s=pt,As=_s("iterator"),Rs=_s("toStringTag"),Cs=Es.values,Is=function(t,e){if(t){if(t[As]!==Cs)try{Os(t,As,Cs)}catch(e){t[As]=Cs}if(t[Rs]||Os(t,Rs,e),Ss[e])for(var n in Es)if(t[n]!==Es[n])try{Os(t,n,Es[n])}catch(e){t[n]=Es[n]}}};for(var Ps in Ss)Is(ks[Ps]&&ks[Ps].prototype,Ps);Is(Ts,"DOMTokenList");var js=y,Ls=Array.isArray||function(t){return"Array"==js(t)},Ms=xt,Ns=Nt,Ds=h,Bs=function(t,e,n){var r=Ms(e);r in t?Ns.f(t,r,Ds(0,n)):t[r]=n},Fs=T,Us=Ls,Ws=pt("species"),zs=function(t){var e;return Us(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Us(e.prototype)?Fs(e)&&null===(e=e[Ws])&&(e=void 0):e=void 0),void 0===e?Array:e},Gs=function(t,e){return new(zs(t))(0===e?0:e)},$s=a,Vs=M,Ks=pt("species"),qs=function(t){return Vs>=51||!$s((function(){var e=[];return(e.constructor={})[Ks]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Ys=_n,Xs=a,Js=Ls,Hs=T,Zs=H,Qs=De,tc=Bs,ec=Gs,nc=qs,rc=M,oc=pt("isConcatSpreadable"),ic=9007199254740991,ac="Maximum allowed index exceeded",sc=rc>=51||!Xs((function(){var t=[];return t[oc]=!1,t.concat()[0]!==t})),cc=nc("concat"),uc=function(t){if(!Hs(t))return!1;var e=t[oc];return void 0!==e?!!e:Js(t)};Ys({target:"Array",proto:!0,forced:!sc||!cc},{concat:function(t){var e,n,r,o,i,a=Zs(this),s=ec(a,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(uc(i=-1===e?a:arguments[e])){if(c+(o=Qs(i.length))>ic)throw TypeError(ac);for(n=0;n<o;n++,c++)n in i&&tc(s,c,i[n])}else{if(c>=ic)throw TypeError(ac);tc(s,c++,i)}return s.length=c,s}});var fc=Fi,lc=b,dc=H,pc=De,hc=Gs,vc=[].push,yc=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,s=5==t||i;return function(c,u,f,l){for(var d,p,h=dc(c),v=lc(h),y=fc(u,f,3),g=pc(v.length),m=0,b=l||hc,w=e?b(c,g):n||a?b(c,0):void 0;g>m;m++)if((s||m in v)&&(p=y(d=v[m],m,h),t))if(e)w[m]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return m;case 2:vc.call(w,d)}else switch(t){case 4:return!1;case 7:vc.call(w,d)}return i?-1:r||o?o:w}},gc={forEach:yc(0),map:yc(1),filter:yc(2),some:yc(3),every:yc(4),find:yc(5),findIndex:yc(6),filterReject:yc(7)},mc=a,bc=function(t,e){var n=[][t];return!!n&&mc((function(){n.call(null,e||function(){throw 1},1)}))},wc=gc.forEach,xc=bc("forEach")?[].forEach:function(t){return wc(this,t,arguments.length>1?arguments[1]:void 0)},kc=o,Sc=ms,Tc=xs,Ec=xc,Oc=Kt,_c=function(t){if(t&&t.forEach!==Ec)try{Oc(t,"forEach",Ec)}catch(e){t.forEach=Ec}};for(var Ac in Sc)_c(kc[Ac]&&kc[Ac].prototype);_c(Tc);var Rc,Cc,Ic,Pc,jc=o.Promise,Lc=Bt,Mc=Mn,Nc=pt("species"),Dc=function(t,e){var n,r=Lc(t).constructor;return void 0===r||null==(n=Lc(r)[Nc])?e:Mc(n)},Bc=/(?:ipad|iphone|ipod).*applewebkit/i.test(A),Fc="process"==y(o.process),Uc=o,Wc=a,zc=Fi,Gc=Gn,$c=Et,Vc=Bc,Kc=Fc,qc=Uc.setImmediate,Yc=Uc.clearImmediate,Xc=Uc.process,Jc=Uc.MessageChannel,Hc=Uc.Dispatch,Zc=0,Qc={},tu="onreadystatechange";try{Rc=Uc.location}catch(t){}var eu=function(t){if(Qc.hasOwnProperty(t)){var e=Qc[t];delete Qc[t],e()}},nu=function(t){return function(){eu(t)}},ru=function(t){eu(t.data)},ou=function(t){Uc.postMessage(String(t),Rc.protocol+"//"+Rc.host)};qc&&Yc||(qc=function(t){for(var e=[],n=arguments.length,r=1;n>r;)e.push(arguments[r++]);return Qc[++Zc]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Cc(Zc),Zc},Yc=function(t){delete Qc[t]},Kc?Cc=function(t){Xc.nextTick(nu(t))}:Hc&&Hc.now?Cc=function(t){Hc.now(nu(t))}:Jc&&!Vc?(Pc=(Ic=new Jc).port2,Ic.port1.onmessage=ru,Cc=zc(Pc.postMessage,Pc,1)):Uc.addEventListener&&"function"==typeof postMessage&&!Uc.importScripts&&Rc&&"file:"!==Rc.protocol&&!Wc(ou)?(Cc=ou,Uc.addEventListener("message",ru,!1)):Cc=tu in $c("script")?function(t){Gc.appendChild($c("script")).onreadystatechange=function(){Gc.removeChild(this),eu(t)}}:function(t){setTimeout(nu(t),0)});var iu,au,su,cu,uu,fu,lu,du,pu={set:qc,clear:Yc},hu=o,vu=/ipad|iphone|ipod/i.test(A)&&void 0!==hu.Pebble,yu=/web0s(?!.*chrome)/i.test(A),gu=o,mu=i.f,bu=pu.set,wu=Bc,xu=vu,ku=yu,Su=Fc,Tu=gu.MutationObserver||gu.WebKitMutationObserver,Eu=gu.document,Ou=gu.process,_u=gu.Promise,Au=mu(gu,"queueMicrotask"),Ru=Au&&Au.value;Ru||(iu=function(){var t,e;for(Su&&(t=Ou.domain)&&t.exit();au;){e=au.fn,au=au.next;try{e()}catch(t){throw au?cu():su=void 0,t}}su=void 0,t&&t.enter()},wu||Su||ku||!Tu||!Eu?!xu&&_u&&_u.resolve?((lu=_u.resolve(void 0)).constructor=_u,du=lu.then,cu=function(){du.call(lu,iu)}):cu=Su?function(){Ou.nextTick(iu)}:function(){bu.call(gu,iu)}:(uu=!0,fu=Eu.createTextNode(""),new Tu(iu).observe(fu,{characterData:!0}),cu=function(){fu.data=uu=!uu}));var Cu=Ru||function(t){var e={fn:t,next:void 0};su&&(su.next=e),au||(au=e,cu()),su=e},Iu={},Pu=Mn,ju=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Pu(e),this.reject=Pu(n)};Iu.f=function(t){return new ju(t)};var Lu,Mu,Nu,Du,Bu=Bt,Fu=T,Uu=Iu,Wu=o,zu="object"==typeof window,Gu=_n,$u=o,Vu=_,Ku=jc,qu=qt.exports,Yu=La,Xu=Wo,Ju=In,Hu=Fa,Zu=T,Qu=Mn,tf=la,ef=Qt,nf=fa,rf=ya,of=Dc,af=pu.set,sf=Cu,cf=function(t,e){if(Bu(t),Fu(e)&&e.constructor===t)return e;var n=Uu.f(t);return(0,n.resolve)(e),n.promise},uf=function(t,e){var n=Wu.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))},ff=Iu,lf=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},df=ke,pf=bn,hf=zu,vf=Fc,yf=M,gf=pt("species"),mf="Promise",bf=df.get,wf=df.set,xf=df.getterFor(mf),kf=Ku&&Ku.prototype,Sf=Ku,Tf=kf,Ef=$u.TypeError,Of=$u.document,_f=$u.process,Af=ff.f,Rf=Af,Cf=!!(Of&&Of.createEvent&&$u.dispatchEvent),If="function"==typeof PromiseRejectionEvent,Pf="unhandledrejection",jf=!1,Lf=pf(mf,(function(){var t=ef(Sf),e=t!==String(Sf);if(!e&&66===yf)return!0;if(yf>=51&&/native code/.test(t))return!1;var n=new Sf((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[gf]=r,!(jf=n.then((function(){}))instanceof r)||!e&&hf&&!If})),Mf=Lf||!rf((function(t){Sf.all(t).catch((function(){}))})),Nf=function(t){var e;return!(!Zu(t)||"function"!=typeof(e=t.then))&&e},Df=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;sf((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,s,c,u=n[i++],f=o?u.ok:u.fail,l=u.resolve,d=u.reject,p=u.domain;try{f?(o||(2===t.rejection&&Wf(t),t.rejection=1),!0===f?a=r:(p&&p.enter(),a=f(r),p&&(p.exit(),c=!0)),a===u.promise?d(Ef("Promise-chain cycle")):(s=Nf(a))?s.call(a,l,d):l(a)):d(r)}catch(t){p&&!c&&p.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Ff(t)}))}},Bf=function(t,e,n){var r,o;Cf?((r=Of.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),$u.dispatchEvent(r)):r={promise:e,reason:n},!If&&(o=$u["on"+t])?o(r):t===Pf&&uf("Unhandled promise rejection",n)},Ff=function(t){af.call($u,(function(){var e,n=t.facade,r=t.value;if(Uf(t)&&(e=lf((function(){vf?_f.emit("unhandledRejection",r,n):Bf(Pf,n,r)})),t.rejection=vf||Uf(t)?2:1,e.error))throw e.value}))},Uf=function(t){return 1!==t.rejection&&!t.parent},Wf=function(t){af.call($u,(function(){var e=t.facade;vf?_f.emit("rejectionHandled",e):Bf("rejectionhandled",e,t.value)}))},zf=function(t,e,n){return function(r){t(e,r,n)}},Gf=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Df(t,!0))},$f=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Ef("Promise can't be resolved itself");var r=Nf(e);r?sf((function(){var n={done:!1};try{r.call(e,zf($f,n,t),zf(Gf,n,t))}catch(e){Gf(n,e,t)}})):(t.value=e,t.state=1,Df(t,!1))}catch(e){Gf({done:!1},e,t)}}};if(Lf&&(Tf=(Sf=function(t){tf(this,Sf,mf),Qu(t),Lu.call(this);var e=bf(this);try{t(zf($f,e),zf(Gf,e))}catch(t){Gf(e,t)}}).prototype,(Lu=function(t){wf(this,{type:mf,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Yu(Tf,{then:function(t,e){var n=xf(this),r=Af(of(this,Sf));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=vf?_f.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Df(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Mu=function(){var t=new Lu,e=bf(t);this.promise=t,this.resolve=zf($f,e),this.reject=zf(Gf,e)},ff.f=Af=function(t){return t===Sf||t===Nu?new Mu(t):Rf(t)},"function"==typeof Ku&&kf!==Object.prototype)){Du=kf.then,jf||(qu(kf,"then",(function(t,e){var n=this;return new Sf((function(t,e){Du.call(n,t,e)})).then(t,e)}),{unsafe:!0}),qu(kf,"catch",Tf.catch,{unsafe:!0}));try{delete kf.constructor}catch(t){}Xu&&Xu(kf,Tf)}function Vf(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Or(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function Kf(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Or(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function qf(){}function Yf(){Yf.init.call(this)}function Xf(t){return void 0===t._maxListeners?Yf.defaultMaxListeners:t._maxListeners}function Jf(t,e,n){if(e)t.call(n);else for(var r=t.length,o=ol(t,r),i=0;i<r;++i)o[i].call(n)}function Hf(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=ol(t,o),a=0;a<o;++a)i[a].call(n,r)}function Zf(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=ol(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function Qf(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=ol(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function tl(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=ol(t,o),a=0;a<o;++a)i[a].apply(n,r)}function el(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new qf,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=Xf(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function nl(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function rl(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function ol(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Gu({global:!0,wrap:!0,forced:Lf},{Promise:Sf}),Ju(Sf,mf,!1),Hu(mf),Nu=Vu(mf),Gu({target:mf,stat:!0,forced:Lf},{reject:function(t){var e=Af(this);return e.reject.call(void 0,t),e.promise}}),Gu({target:mf,stat:!0,forced:Lf},{resolve:function(t){return cf(this,t)}}),Gu({target:mf,stat:!0,forced:Mf},{all:function(t){var e=this,n=Af(e),r=n.resolve,o=n.reject,i=lf((function(){var n=Qu(e.resolve),i=[],a=0,s=1;nf(t,(function(t){var c=a++,u=!1;i.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,i[c]=t,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=Af(e),r=n.reject,o=lf((function(){var o=Qu(e.resolve);nf(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),qf.prototype=Object.create(null),Yf.EventEmitter=Yf,Yf.usingDomains=!1,Yf.prototype.domain=void 0,Yf.prototype._events=void 0,Yf.prototype._maxListeners=void 0,Yf.defaultMaxListeners=10,Yf.init=function(){this.domain=null,Yf.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new qf,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Yf.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Yf.prototype.getMaxListeners=function(){return Xf(this)},Yf.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:Jf(n,f,this);break;case 2:Hf(n,f,this,arguments[1]);break;case 3:Zf(n,f,this,arguments[1],arguments[2]);break;case 4:Qf(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];tl(n,f,this,o)}return!0},Yf.prototype.addListener=function(t,e){return el(this,t,e,!1)},Yf.prototype.on=Yf.prototype.addListener,Yf.prototype.prependListener=function(t,e){return el(this,t,e,!0)},Yf.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,nl(this,t,e)),this},Yf.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,nl(this,t,e)),this},Yf.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new qf:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new qf,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},Yf.prototype.off=function(t,e){return this.removeListener(t,e)},Yf.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new qf,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new qf:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new qf,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},Yf.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[],n},Yf.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):rl.call(t,e)},Yf.prototype.listenerCount=rl,Yf.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var il={},al={exports:{}};!function(t){function e(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=t.apply(n,r);function s(t){e(a,o,i,s,c,"next",t)}function c(t){e(a,o,i,s,c,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports}(al);var sl={exports:{}};!function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}(sl);var cl,ul={exports:{}};(cl=ul).exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},cl.exports.__esModule=!0,cl.exports.default=cl.exports;var fl={exports:{}},ll={exports:{}},dl={exports:{}};!function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(dl),function(t){var e=dl.exports;t.exports=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=e(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports}(ll),function(t){var e=ll.exports;function n(){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=n=Reflect.get,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=n=function(t,n,r){var o=e(t,n);if(o){var i=Object.getOwnPropertyDescriptor(o,n);return i.get?i.get.call(arguments.length<3?t:r):i.value}},t.exports.__esModule=!0,t.exports.default=t.exports),n.apply(this,arguments)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(fl);var pl={exports:{}},hl={exports:{}};!function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(hl),function(t){var e=hl.exports;t.exports=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&e(t,n)},t.exports.__esModule=!0,t.exports.default=t.exports}(pl);var vl={exports:{}},yl={exports:{}};!function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(yl),function(t){var e=yl.exports.default,n=ul.exports;t.exports=function(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return n(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(vl);var gl={exports:{}};!function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}(gl);var ml={exports:{}};!function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports}(ml);var bl=n(so),wl=Bt,xl=function(){var t=wl(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},kl=qt.exports,Sl=Bt,Tl=is,El=a,Ol=xl,_l="toString",Al=RegExp.prototype,Rl=Al.toString,Cl=El((function(){return"/a/b"!=Rl.call({source:"a",flags:"b"})})),Il=Rl.name!=_l;(Cl||Il)&&kl(RegExp.prototype,_l,(function(){var t=Sl(this),e=Tl(t.source),n=t.flags;return"/"+e+"/"+Tl(void 0===n&&t instanceof RegExp&&!("flags"in Al)?Ol.call(t):n)}),{unsafe:!0});var Pl=_n,jl=S,Ll=[].join,Ml=b!=Object,Nl=bc("join",",");Pl({target:"Array",proto:!0,forced:Ml||!Nl},{join:function(t){return Ll.call(jl(this),void 0===t?",":t)}});var Dl=gc.map;_n({target:"Array",proto:!0,forced:!qs("map")},{map:function(t){return Dl(this,t,arguments.length>1?arguments[1]:void 0)}});var Bl={},Fl=_n,Ul=T,Wl=Ls,zl=We,Gl=De,$l=S,Vl=Bs,Kl=pt,ql=qs("slice"),Yl=Kl("species"),Xl=[].slice,Jl=Math.max;Fl({target:"Array",proto:!0,forced:!ql},{slice:function(t,e){var n,r,o,i=$l(this),a=Gl(i.length),s=zl(t,a),c=zl(void 0===e?a:e,a);if(Wl(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Wl(n.prototype)?Ul(n)&&null===(n=n[Yl])&&(n=void 0):n=void 0,n===Array||void 0===n))return Xl.call(i,s,c);for(r=new(void 0===n?Array:n)(Jl(c-s,0)),o=0;s<c;s++,o++)s in i&&Vl(r,o,i[s]);return r.length=o,r}});var Hl=Bt,Zl=ea,Ql=Fi,td=H,ed=function(t,e,n,r){try{return r?e(Hl(n)[0],n[1]):e(n)}catch(e){Zl(t,"throw",e)}},nd=Di,rd=De,od=Bs,id=Qi,ad=Ji,sd=function(t){var e,n,r,o,i,a,s=td(t),c="function"==typeof this?this:Array,u=arguments.length,f=u>1?arguments[1]:void 0,l=void 0!==f,d=ad(s),p=0;if(l&&(f=Ql(f,u>2?arguments[2]:void 0,2)),null==d||c==Array&&nd(d))for(n=new c(e=rd(s.length));e>p;p++)a=l?f(s[p],p):s[p],od(n,p,a);else for(i=(o=id(s,d)).next,n=new c;!(r=i.call(o)).done;p++)a=l?ed(o,f,[r.value,p],!0):r.value,od(n,p,a);return n.length=p,n};_n({target:"Array",stat:!0,forced:!ya((function(t){Array.from(t)}))},{from:sd});var cd={},ud=a,fd=o.RegExp;cd.UNSUPPORTED_Y=ud((function(){var t=fd("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),cd.BROKEN_CARET=ud((function(){var t=fd("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));var ld,dd,pd=a,hd=o.RegExp,vd=pd((function(){var t=hd(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),yd=a,gd=o.RegExp,md=yd((function(){var t=gd("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),bd=is,wd=xl,xd=cd,kd=G.exports,Sd=er,Td=ke.get,Ed=vd,Od=md,_d=RegExp.prototype.exec,Ad=kd("native-string-replace",String.prototype.replace),Rd=_d,Cd=(ld=/a/,dd=/b*/g,_d.call(ld,"a"),_d.call(dd,"a"),0!==ld.lastIndex||0!==dd.lastIndex),Id=xd.UNSUPPORTED_Y||xd.BROKEN_CARET,Pd=void 0!==/()??/.exec("")[1];(Cd||Pd||Id||Ed||Od)&&(Rd=function(t){var e,n,r,o,i,a,s,c=this,u=Td(c),f=bd(t),l=u.raw;if(l)return l.lastIndex=c.lastIndex,e=Rd.call(l,f),c.lastIndex=l.lastIndex,e;var d=u.groups,p=Id&&c.sticky,h=wd.call(c),v=c.source,y=0,g=f;if(p&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),g=f.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==f.charAt(c.lastIndex-1))&&(v="(?: "+v+")",g=" "+g,y++),n=new RegExp("^(?:"+v+")",h)),Pd&&(n=new RegExp("^"+v+"$(?!\\s)",h)),Cd&&(r=c.lastIndex),o=_d.call(p?n:c,g),p?o?(o.input=o.input.slice(y),o[0]=o[0].slice(y),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:Cd&&o&&(c.lastIndex=c.global?o.index+o[0].length:r),Pd&&o&&o.length>1&&Ad.call(o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=a=Sd(null),i=0;i<d.length;i++)a[(s=d[i])[0]]=o[s[1]];return o});var jd=Rd;_n({target:"RegExp",proto:!0,forced:/./.exec!==jd},{exec:jd});var Ld,Md,Nd=_n,Dd=T,Bd=(Ld=!1,(Md=/[ac]/).exec=function(){return Ld=!0,/./.exec.apply(this,arguments)},!0===Md.test("abc")&&Ld),Fd=/./.test;Nd({target:"RegExp",proto:!0,forced:!Bd},{test:function(t){if("function"!=typeof this.exec)return Fd.call(this,t);var e=this.exec(t);if(null!==e&&!Dd(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}});var Ud={},Wd=pt;Ud.f=Wd;var zd=o,Gd=tt,$d=Ud,Vd=Nt.f,Kd=function(t){var e=zd.Symbol||(zd.Symbol={});Gd(e,t)||Vd(e,t,{value:$d.f(t)})},qd=_n,Yd=o,Xd=_,Jd=s,Hd=B,Zd=a,Qd=tt,tp=Ls,ep=T,np=W,rp=Bt,op=H,ip=S,ap=xt,sp=is,cp=h,up=er,fp=Bn,lp=Ie,dp=hi,pp=en,hp=i,vp=Nt,yp=c,gp=Kt,mp=qt.exports,bp=G.exports,wp=se,xp=rt,kp=pt,Sp=Ud,Tp=Kd,Ep=In,Op=ke,_p=gc.forEach,Ap=ae("hidden"),Rp="Symbol",Cp=kp("toPrimitive"),Ip=Op.set,Pp=Op.getterFor(Rp),jp=Object.prototype,Lp=Yd.Symbol,Mp=Xd("JSON","stringify"),Np=hp.f,Dp=vp.f,Bp=dp.f,Fp=yp.f,Up=bp("symbols"),Wp=bp("op-symbols"),zp=bp("string-to-symbol-registry"),Gp=bp("symbol-to-string-registry"),$p=bp("wks"),Vp=Yd.QObject,Kp=!Vp||!Vp.prototype||!Vp.prototype.findChild,qp=Jd&&Zd((function(){return 7!=up(Dp({},"a",{get:function(){return Dp(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Np(jp,e);r&&delete jp[e],Dp(t,e,n),r&&t!==jp&&Dp(jp,e,r)}:Dp,Yp=function(t,e){var n=Up[t]=up(Lp.prototype);return Ip(n,{type:Rp,tag:t,description:e}),Jd||(n.description=e),n},Xp=function(t,e,n){t===jp&&Xp(Wp,e,n),rp(t);var r=ap(e);return rp(n),Qd(Up,r)?(n.enumerable?(Qd(t,Ap)&&t[Ap][r]&&(t[Ap][r]=!1),n=up(n,{enumerable:cp(0,!1)})):(Qd(t,Ap)||Dp(t,Ap,cp(1,{})),t[Ap][r]=!0),qp(t,r,n)):Dp(t,r,n)},Jp=function(t,e){rp(t);var n=ip(e),r=fp(n).concat(th(n));return _p(r,(function(e){Jd&&!Hp.call(n,e)||Xp(t,e,n[e])})),t},Hp=function(t){var e=ap(t),n=Fp.call(this,e);return!(this===jp&&Qd(Up,e)&&!Qd(Wp,e))&&(!(n||!Qd(this,e)||!Qd(Up,e)||Qd(this,Ap)&&this[Ap][e])||n)},Zp=function(t,e){var n=ip(t),r=ap(e);if(n!==jp||!Qd(Up,r)||Qd(Wp,r)){var o=Np(n,r);return!o||!Qd(Up,r)||Qd(n,Ap)&&n[Ap][r]||(o.enumerable=!0),o}},Qp=function(t){var e=Bp(ip(t)),n=[];return _p(e,(function(t){Qd(Up,t)||Qd(wp,t)||n.push(t)})),n},th=function(t){var e=t===jp,n=Bp(e?Wp:ip(t)),r=[];return _p(n,(function(t){!Qd(Up,t)||e&&!Qd(jp,t)||r.push(Up[t])})),r};(Hd||(Lp=function(){if(this instanceof Lp)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?sp(arguments[0]):void 0,e=xp(t),n=function(t){this===jp&&n.call(Wp,t),Qd(this,Ap)&&Qd(this[Ap],e)&&(this[Ap][e]=!1),qp(this,e,cp(1,t))};return Jd&&Kp&&qp(jp,e,{configurable:!0,set:n}),Yp(e,t)},mp(Lp.prototype,"toString",(function(){return Pp(this).tag})),mp(Lp,"withoutSetter",(function(t){return Yp(xp(t),t)})),yp.f=Hp,vp.f=Xp,hp.f=Zp,lp.f=dp.f=Qp,pp.f=th,Sp.f=function(t){return Yp(kp(t),t)},Jd&&(Dp(Lp.prototype,"description",{configurable:!0,get:function(){return Pp(this).description}}),mp(jp,"propertyIsEnumerable",Hp,{unsafe:!0}))),qd({global:!0,wrap:!0,forced:!Hd,sham:!Hd},{Symbol:Lp}),_p(fp($p),(function(t){Tp(t)})),qd({target:Rp,stat:!0,forced:!Hd},{for:function(t){var e=sp(t);if(Qd(zp,e))return zp[e];var n=Lp(e);return zp[e]=n,Gp[n]=e,n},keyFor:function(t){if(!np(t))throw TypeError(t+" is not a symbol");if(Qd(Gp,t))return Gp[t]},useSetter:function(){Kp=!0},useSimple:function(){Kp=!1}}),qd({target:"Object",stat:!0,forced:!Hd,sham:!Jd},{create:function(t,e){return void 0===e?up(t):Jp(up(t),e)},defineProperty:Xp,defineProperties:Jp,getOwnPropertyDescriptor:Zp}),qd({target:"Object",stat:!0,forced:!Hd},{getOwnPropertyNames:Qp,getOwnPropertySymbols:th}),qd({target:"Object",stat:!0,forced:Zd((function(){pp.f(1)}))},{getOwnPropertySymbols:function(t){return pp.f(op(t))}}),Mp)&&qd({target:"JSON",stat:!0,forced:!Hd||Zd((function(){var t=Lp();return"[null]"!=Mp([t])||"{}"!=Mp({a:t})||"{}"!=Mp(Object(t))}))},{stringify:function(t,e,n){for(var r,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=e,(ep(e)||void 0!==t)&&!np(t))return tp(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!np(e))return e}),o[1]=e,Mp.apply(null,o)}});Lp.prototype[Cp]||gp(Lp.prototype,Cp,Lp.prototype.valueOf),Ep(Lp,Rp),wp[Ap]=!0;var eh=_n,nh=s,rh=o,oh=tt,ih=T,ah=Nt.f,sh=ln,ch=rh.Symbol;if(nh&&"function"==typeof ch&&(!("description"in ch.prototype)||void 0!==ch().description)){var uh={},fh=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof fh?new ch(t):void 0===t?ch():ch(t);return""===t&&(uh[e]=!0),e};sh(fh,ch);var lh=fh.prototype=ch.prototype;lh.constructor=fh;var dh=lh.toString,ph="Symbol(test)"==String(ch("test")),hh=/^Symbol\((.*)\)[^)]+$/;ah(lh,"description",{configurable:!0,get:function(){var t=ih(this)?this.valueOf():this,e=dh.call(t);if(oh(uh,t))return"";var n=ph?e.slice(7,-1):e.replace(hh,"$1");return""===n?void 0:n}}),eh({global:!0,forced:!0},{Symbol:fh})}Kd("iterator");var vh=s,yh=Nt.f,gh=Function.prototype,mh=gh.toString,bh=/^\s*function ([^ (]*)/,wh="name";vh&&!(wh in gh)&&yh(gh,wh,{configurable:!0,get:function(){try{return mh.call(this).match(bh)[1]}catch(t){return""}}});var xh={exports:{}},kh={exports:{}};!function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports}(kh);var Sh={exports:{}};!function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}},t.exports.__esModule=!0,t.exports.default=t.exports}(Sh);var Th={exports:{}},Eh={exports:{}};!function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports}(Eh),function(t){var e=Eh.exports;t.exports=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}(Th);var Oh={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}(Oh),function(t){var e=kh.exports,n=Sh.exports,r=Th.exports,o=Oh.exports;t.exports=function(t,i){return e(t)||n(t,i)||r(t,i)||o()},t.exports.__esModule=!0,t.exports.default=t.exports}(xh);var _h={exports:{}},Ah={exports:{}};!function(t){var e=Eh.exports;t.exports=function(t){if(Array.isArray(t))return e(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(Ah);var Rh={exports:{}};!function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(Rh);var Ch={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}(Ch),function(t){var e=Ah.exports,n=Rh.exports,r=Th.exports,o=Ch.exports;t.exports=function(t){return e(t)||n(t)||r(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports}(_h);var Ih=Ke.includes,Ph=yo;_n({target:"Array",proto:!0},{includes:function(t){return Ih(this,t,arguments.length>1?arguments[1]:void 0)}}),Ph("includes");var jh=T,Lh=Math.floor,Mh=function(t){return!jh(t)&&isFinite(t)&&Lh(t)===t};_n({target:"Number",stat:!0},{isInteger:Mh});var Nh=w,Dh=is,Bh="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",Fh=RegExp("^"+Bh+Bh+"*"),Uh=RegExp(Bh+Bh+"*$"),Wh=function(t){return function(e){var n=Dh(Nh(e));return 1&t&&(n=n.replace(Fh,"")),2&t&&(n=n.replace(Uh,"")),n}},zh={start:Wh(1),end:Wh(2),trim:Wh(3)},Gh=s,$h=o,Vh=bn,Kh=qt.exports,qh=tt,Yh=y,Xh=ba,Jh=W,Hh=mt,Zh=a,Qh=er,tv=Ie.f,ev=i.f,nv=Nt.f,rv=zh.trim,ov="Number",iv=$h.Number,av=iv.prototype,sv=Yh(Qh(av))==ov,cv=function(t){if(Jh(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,r,o,i,a,s,c,u=Hh(t,"number");if("string"==typeof u&&u.length>2)if(43===(e=(u=rv(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=u.slice(2)).length,s=0;s<a;s++)if((c=i.charCodeAt(s))<48||c>o)return NaN;return parseInt(i,r)}return+u};if(Vh(ov,!iv(" 0o1")||!iv("0b1")||iv("+0x1"))){for(var uv,fv=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof fv&&(sv?Zh((function(){av.valueOf.call(n)})):Yh(n)!=ov)?Xh(new iv(cv(e)),n,fv):cv(e)},lv=Gh?tv(iv):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),dv=0;lv.length>dv;dv++)qh(iv,uv=lv[dv])&&!qh(fv,uv)&&nv(fv,uv,ev(iv,uv));fv.prototype=av,av.constructor=fv,Kh($h,ov,fv)}var pv=s,hv=Bn,vv=S,yv=c.f,gv=function(t){return function(e){for(var n,r=vv(e),o=hv(r),i=o.length,a=0,s=[];i>a;)n=o[a++],pv&&!yv.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},mv={entries:gv(!0),values:gv(!1)}.entries;_n({target:"Object",stat:!0},{entries:function(t){return mv(t)}}),Object.defineProperty(Bl,"__esModule",{value:!0});var bv=xh.exports,wv=_h.exports,xv=sl.exports,kv=gl.exports,Sv=pl.exports,Tv=vl.exports,Ev=dl.exports;function Ov(t){return t&&"object"===Or(t)&&"default"in t?t:{default:t}}var _v=Ov(yl.exports),Av=Ov(bv),Rv=Ov(wv),Cv=Ov(xv),Iv=Ov(kv),Pv=Ov(Sv),jv=Ov(Tv),Lv=Ov(Ev),Mv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{checks:e}};function Nv(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Dv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Dv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Mv((function(t){var n,r=!1,o=[],i=Nv(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;"string"!=typeof a?(r=r||t instanceof a,o.push("an instance of ".concat(a.name))):(r=r||_v.default(t)===a,o.push("of type ".concat(a)))}}catch(t){i.e(t)}finally{i.f()}return[r,o]}))};function Fv(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Uv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Uv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lv.default(t);if(e){var o=Lv.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jv.default(this,n)}}function zv(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Gv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Gv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $v=function(t,e){if(e.length>t.length)throw new Error("Expected at most ".concat(t.length," argument(s), but got ").concat(e.length));for(;e.length<t.length;)e.push(void 0);var n,r=zv(e.entries());try{for(r.s();!(n=r.n()).done;){var o=Av.default(n.value,2),i=o[0],a=o[1],s=Yv(t[i],a),c=Av.default(s,4),u=c[0],f=c[1],l=c[2],d=c[3];if(!u)throw new Error("Argument ".concat(i+1," is expected to be ").concat(l).concat(d," but got ").concat(f))}}catch(t){r.e(t)}finally{r.f()}},Vv=function(t){var e,n,r;(["undefined","boolean","number","bigint","string"].includes(_v.default(t))&&(n="string"==typeof t?'"'.concat(t,'"'):"".concat(t)),"object"===_v.default(t)&&"Object"!==(null==t||null===(e=t.constructor)||void 0===e?void 0:e.name))&&(n=null===t?"null":"instance of ".concat(null==t||null===(r=t.constructor)||void 0===r?void 0:r.name));return n||(n=_v.default(t)),n},Kv=function(t){var e,n=[],r=zv(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push(qv(o))}}catch(t){r.e(t)}finally{r.f()}return n},qv=function(t){var e,n=[],r=zv(Array.isArray(t)?t:[t]);try{for(r.s();!(e=r.n()).done;){var o=e.value;"string"!=typeof o&&"function"!=typeof o?n.push(o):n.push(Bv(o))}}catch(t){r.e(t)}finally{r.f()}return n},Yv=function(t,e){var n,r,o=[],i=!1,a=zv(t);try{for(a.s();!(r=a.n()).done;){var s,c=zv(r.value.checks);try{for(c.s();!(s=c.n()).done;){var u=(0,s.value)(e),f=Av.default(u,3),l=f[0],d=f[1],p=f[2];i=i||l,!n&&p&&(n=p),d&&(o=[].concat(Rv.default(o),"string"==typeof d?[d]:Rv.default(d)))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){a.e(t)}finally{a.f()}if(i)return[!0];var h=n||Vv(e),v=o.length-1;return[!1,h,v>0?"".concat(o.slice(0,v).join(", ")," or ").concat(o[v]):o.join(", "),v>1?";":","]};function Xv(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Jv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Jv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Hv=Mv((function(t){return["string"==typeof t&&t.length>0,"a non-empty string"]})),Zv=Mv((function(t){return["number"==typeof t&&Number.isInteger(t)&&t>=0,"a non-negative integer"]})),Qv=Mv((function(t){return["object"===_v.default(t)&&null!==t&&!Array.isArray(t),"a pure object (non-null and non-array)"]}));function ty(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ey(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ey(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ey(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Bl.array=function(t,e){return Mv((function(n){if(!Array.isArray(n))return[!1,"an array of ".concat(t)];var r,o=ty(n.entries());try{for(o.s();!(r=o.n()).done;){var i=Av.default(r.value,2),a=i[0],s=i[1],c=Yv(qv(e),s),u=Av.default(c,3),f=u[0],l=u[1],d=u[2];if(!f)return[!1,"a valid array of ".concat(t," (index ").concat(a," should be ").concat(d,")"),"malformed array of ".concat(t," (index ").concat(a," is ").concat(l,")")]}}catch(t){o.e(t)}finally{o.f()}return[!0]}))},Bl.custom=Mv;var ny=Bl.literal=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Mv((function(t){var n,r=!1,o=[],i=Fv(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||t===a,o.push("string"==typeof a?'"'.concat(a,'"'):"".concat(a))}}catch(t){i.e(t)}finally{i.f()}return[r,o]}))};Bl.nonEmptyArray=function(t,e){return Mv((function(n){if(!Array.isArray(n)||n.length<1)return[!1,"a non-empty array of ".concat(t)];var r,o=Xv(n.entries());try{for(o.s();!(r=o.n()).done;){var i=Av.default(r.value,2),a=i[0],s=i[1],c=Yv(qv(e),s),u=Av.default(c,3),f=u[0],l=u[1],d=u[2];if(!f)return[!1,"a valid non-empty array of ".concat(t," (index ").concat(a," should be ").concat(d,")"),"malformed array of ".concat(t," (index ").concat(a," is ").concat(l,")")]}}catch(t){o.e(t)}finally{o.f()}return[!0]}))};var ry=Bl.nonEmptyString=Hv;Bl.nonNegativeInteger=Zv,Bl.objectSchema=function(t,e){return Mv((function(n){if("object"!==_v.default(n)||null===n||Array.isArray(n))return[!1,"valid ".concat(t," (should be a pure object)")];for(var r=0,o=Object.entries(e);r<o.length;r++){var i=Av.default(o[r],2),a=i[0],s=i[1],c=Yv(qv(s),n[a]),u=Av.default(c,3),f=u[0],l=u[1],d=u[2];if(!f)return[!1,"valid ".concat(t,' (key "').concat(a,'" should be ').concat(d,")"),"malformed ".concat(t,' (key "').concat(a,'" is ').concat(l,")")]}return[!0]}))};var oy=Bl.pureObject=Qv;Bl.runtimeTypeValidation=$v,Bl.stringifyReceivedType=Vv,Bl.type=Bv;var iy=Bl.validateConstructorTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Kv(e);return function(t){return function(t){Pv.default(n,t);var e=Wv(n);function n(){Iv.default(this,n);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return $v(r,o),e.call.apply(e,[this].concat(o))}return Cv.default(n)}(t)}},ay=Bl.validateTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Kv(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypes decorator can only be applied to methods");var o=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $v(r,e),o.apply(this,e)}}},sy=Bl.validateTypesAsync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Kv(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypesAsync decorator can only be applied to methods");var o=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];try{$v(r,e)}catch(t){return Promise.reject(t)}return o.apply(this,e)}}},cy={exports:{}};!function(t){var n,r;n=e,r=function(){var t=function(){},e="undefined",n=("undefined"==typeof window?"undefined":Or(window))!==e&&Or(window.navigator)!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function o(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(r){return"debug"===r&&(r="log"),("undefined"==typeof console?"undefined":Or(console))!==e&&("trace"===r&&n?i:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):t)}function s(e,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<e?t:this.methodFactory(i,e,n)}this.log=this.debug}function c(t,n,r){return function(){("undefined"==typeof console?"undefined":Or(console))!==e&&(s.call(this,n,r),this[t].apply(this,arguments))}}function u(t,e,n){return a(t)||c.apply(this,arguments)}function f(t,n,o){var i,a=this;n=null==n?"WARN":n;var c="loglevel";function f(){var t;if(("undefined"==typeof window?"undefined":Or(window))!==e&&c){try{t=window.localStorage[c]}catch(t){}if(Or(t)===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?c+=":"+t:"symbol"===Or(t)&&(c=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||u,a.getLevel=function(){return i},a.setLevel=function(n,o){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==o&&function(t){var n=(r[t]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":Or(window))!==e&&c){try{return void(window.localStorage[c]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(t){}}}(n),s.call(a,n,t),("undefined"==typeof console?"undefined":Or(console))===e&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){n=t,f()||a.setLevel(t,!1)},a.resetLevel=function(){a.setLevel(n,!1),function(){if(("undefined"==typeof window?"undefined":Or(window))!==e&&c){try{return void window.localStorage.removeItem(c)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(t){}}}()},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var l=f();null==l&&(l=n),a.setLevel(l,!1)}var l=new f,d={};l.getLogger=function(t){if("symbol"!==Or(t)&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=d[t];return e||(e=d[t]=new f(t,l.getLevel(),l.methodFactory)),e};var p=("undefined"==typeof window?"undefined":Or(window))!==e?window.log:void 0;return l.noConflict=function(){return("undefined"==typeof window?"undefined":Or(window))!==e&&window.log===l&&(window.log=p),l},l.getLoggers=function(){return d},l.default=l,l},t.exports?t.exports=r():n.log=r()}(cy),Pa("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Za);var uy={exports:{}};!function(t,e){var n;n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){t.exports=function(t,e){var n,r,o;for(n=1;n<arguments.length;n++)for(o in r=arguments[n])r.hasOwnProperty(o)&&(t[o]=r[o]);return t}},function(t,e,n){var r=n(0);t.exports={build:function(t,e){var n,o,i,a=e.plugins;for(n=0,o=a.length;n<o;n++)(i=a[n]).methods&&r(t,i.methods),i.properties&&Object.defineProperties(t,i.properties)},hook:function(t,e,n){var r,o,i,a,s=t.config.plugins,c=[t.context];for(n&&(c=c.concat(n)),r=0,o=s.length;r<o;r++)a=s[r],(i=s[r][e])&&i.apply(a,c)}}},function(t,e,n){function r(t){if(0===t.length)return t;var e,n,r=t.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return t;for(n=r[0].toLowerCase(),e=1;e<r.length;e++)n=n+r[e].charAt(0).toUpperCase()+r[e].substring(1).toLowerCase();return n}r.prepended=function(t,e){return t+(e=r(e))[0].toUpperCase()+e.substring(1)},t.exports=r},function(t,e,n){var r=n(0),o=n(2);function i(t,e){t=t||{},this.options=t,this.defaults=e.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(t.init),this.data=this.configureData(t.data),this.methods=this.configureMethods(t.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(t.transitions||[]),this.plugins=this.configurePlugins(t.plugins,e.plugin)}r(i.prototype,{addState:function(t){this.map[t]||(this.states.push(t),this.addStateLifecycleNames(t),this.map[t]={})},addStateLifecycleNames:function(t){this.lifecycle.onEnter[t]=o.prepended("onEnter",t),this.lifecycle.onLeave[t]=o.prepended("onLeave",t),this.lifecycle.on[t]=o.prepended("on",t)},addTransition:function(t){this.transitions.indexOf(t)<0&&(this.transitions.push(t),this.addTransitionLifecycleNames(t))},addTransitionLifecycleNames:function(t){this.lifecycle.onBefore[t]=o.prepended("onBefore",t),this.lifecycle.onAfter[t]=o.prepended("onAfter",t),this.lifecycle.on[t]=o.prepended("on",t)},mapTransition:function(t){var e=t.name,n=t.from,r=t.to;return this.addState(n),"function"!=typeof r&&this.addState(r),this.addTransition(e),this.map[n][e]=t,t},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(t){return"string"==typeof t?this.mapTransition(r({},this.defaults.init,{to:t,active:!0})):"object"===Or(t)?this.mapTransition(r({},this.defaults.init,t,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(t){return"function"==typeof t?t:"object"===Or(t)?function(){return t}:function(){return{}}},configureMethods:function(t){return t||{}},configurePlugins:function(t,e){var n,r,o;for(n=0,r=(t=t||[]).length;n<r;n++)"function"==typeof(o=t[n])&&(t[n]=o=o()),o.configure&&o.configure(this);return t},configureTransitions:function(t){var e,n,r,o,i,a=this.defaults.wildcard;for(n=0;n<t.length;n++)for(r=t[n],o=Array.isArray(r.from)?r.from:[r.from||a],i=r.to||a,e=0;e<o.length;e++)this.mapTransition({name:r.name,from:o[e],to:i})},transitionFor:function(t,e){var n=this.defaults.wildcard;return this.map[t][e]||this.map[n][e]},transitionsFor:function(t){var e=this.defaults.wildcard;return Object.keys(this.map[t]).concat(Object.keys(this.map[e]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),t.exports=i},function(t,e,n){var r=n(0),o=n(6),i=n(1),a=[null,[]];function s(t,e){this.context=t,this.config=e,this.state=e.init.from,this.observers=[t]}r(s.prototype,{init:function(t){if(r(this.context,this.config.data.apply(this.context,t)),i.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(t){return Array.isArray(t)?t.indexOf(this.state)>=0:this.state===t},isPending:function(){return this.pending},can:function(t){return!this.isPending()&&!!this.seek(t)},cannot:function(t){return!this.can(t)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(t,e){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,t),o=r&&r.to;return"function"==typeof o?o.apply(this.context,e):o===n?this.state:o},fire:function(t,e){return this.transit(t,this.state,this.seek(t,e),e)},transit:function(t,e,n,r){var o=this.config.lifecycle,i=this.config.options.observeUnchangedState||e!==n;return n?this.isPending()?this.context.onPendingTransition(t,e,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:t,from:e,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(o.onBefore.transition),this.observersForEvent(o.onBefore[t]),i?this.observersForEvent(o.onLeave.state):a,i?this.observersForEvent(o.onLeave[e]):a,this.observersForEvent(o.on.transition),i?["doTransit",[this]]:a,i?this.observersForEvent(o.onEnter.state):a,i?this.observersForEvent(o.onEnter[n]):a,i?this.observersForEvent(o.on[n]):a,this.observersForEvent(o.onAfter.transition),this.observersForEvent(o.onAfter[t]),this.observersForEvent(o.on[t])],r)):this.context.onInvalidTransition(t,e,n)},beginTransit:function(){this.pending=!0},endTransit:function(t){return this.pending=!1,t},failTransit:function(t){throw this.pending=!1,t},doTransit:function(t){this.state=t.to},observe:function(t){if(2===t.length){var e={};e[t[0]]=t[1],this.observers.push(e)}else this.observers.push(t[0])},observersForEvent:function(t){for(var e,n=0,r=this.observers.length,o=[];n<r;n++)(e=this.observers[n])[t]&&o.push(e);return[t,o,!0]},observeEvents:function(t,e,n,r){if(0===t.length)return this.endTransit(void 0===r||r);var o=t[0][0],a=t[0][1],s=t[0][2];if(e[0].event=o,o&&s&&o!==n&&i.hook(this,"lifecycle",e),0===a.length)return t.shift(),this.observeEvents(t,e,o,r);var c=a.shift(),u=c[o].apply(c,e);return u&&"function"==typeof u.then?u.then(this.observeEvents.bind(this,t,e,o)).catch(this.failTransit.bind(this)):!1===u?this.endTransit(!1):this.observeEvents(t,e,o,u)},onInvalidTransition:function(t,e,n){throw new o("transition is invalid in current state",t,e,n,this.state)},onPendingTransition:function(t,e,n){throw new o("transition is invalid while previous transition is still in progress",t,e,n,this.state)}}),t.exports=s},function(t,e,n){var r=n(0),o=n(2),i=n(1),a=n(3),s=n(4),c={is:function(t){return this._fsm.is(t)},can:function(t){return this._fsm.can(t)},cannot:function(t){return this._fsm.cannot(t)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(t,e,n){return this._fsm.onInvalidTransition(t,e,n)},onPendingTransition:function(t,e,n){return this._fsm.onPendingTransition(t,e,n)}},u={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(t){throw Error("use transitions to change state")}}};function f(t){return l(this||{},t)}function l(t,e){return d(t,new a(e,f)),t._fsm(),t}function d(t,e){if("object"!==Or(t)||Array.isArray(t))throw Error("StateMachine can only be applied to objects");i.build(t,e),Object.defineProperties(t,u),r(t,c),r(t,e.methods),e.allTransitions().forEach((function(e){t[o(e)]=function(){return this._fsm.fire(e,[].slice.call(arguments))}})),t._fsm=function(){this._fsm=new s(this,e),this._fsm.init(arguments)}}f.version="3.0.1",f.factory=function(){var t,e;"function"==typeof arguments[0]?(t=arguments[0],e=arguments[1]||{}):(t=function(){this._fsm.apply(this,arguments)},e=arguments[0]||{});var n=new a(e,f);return d(t.prototype,n),t.prototype._fsm.config=n,t},f.apply=l,f.defaults={wildcard:"*",init:{name:"init",from:"none"}},t.exports=f},function(t,e,n){t.exports=function(t,e,n,r,o){this.message=t,this.transition=e,this.from=n,this.to=r,this.current=o}}])},t.exports=n()}(uy);var fy={exports:{}},ly="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(ly){var dy=new Uint8Array(16);fy.exports=function(){return ly(dy),dy}}else{var py=new Array(16);fy.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),py[e]=t>>>((3&e)<<3)&255;return py}}for(var hy=[],vy=0;vy<256;++vy)hy[vy]=(vy+256).toString(16).substr(1);var yy,gy,my=function(t,e){var n=e||0,r=hy;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")},by=fy.exports,wy=my,xy=0,ky=0;var Sy=function(t,e,n){var r=e&&n||0,o=e||[],i=(t=t||{}).node||yy,a=void 0!==t.clockseq?t.clockseq:gy;if(null==i||null==a){var s=by();null==i&&(i=yy=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=gy=16383&(s[6]<<8|s[7]))}var c=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:ky+1,f=c-xy+(u-ky)/1e4;if(f<0&&void 0===t.clockseq&&(a=a+1&16383),(f<0||c>xy)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");xy=c,ky=u,gy=a;var l=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var d=c/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var p=0;p<6;++p)o[r+p]=i[p];return e||wy(o)},Ty=fy.exports,Ey=my;var Oy=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||Ty)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[r+i]=o[i];return e||Ey(o)},_y=Sy,Ay=Oy,Ry=Ay;Ry.v1=_y,Ry.v4=Ay;var Cy=Ry,Iy=qt.exports,Py=jd,jy=a,Ly=pt,My=Kt,Ny=Ly("species"),Dy=RegExp.prototype,By=function(t,e,n,r){var o=Ly(t),i=!jy((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!jy((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Ny]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!a||n){var s=/./[o],c=e(o,""[t],(function(t,e,n,r,o){var a=e.exec;return a===Py||a===Dy.exec?i&&!o?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}));Iy(String.prototype,t,c[0]),Iy(Dy,o,c[1])}r&&My(Dy[o],"sham",!0)},Fy=fs.charAt,Uy=function(t,e,n){return e+(n?Fy(t,e).length:1)},Wy=H,zy=Math.floor,Gy="".replace,$y=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Vy=/\$([$&'`]|\d{1,2})/g,Ky=y,qy=jd,Yy=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Ky(t))throw TypeError("RegExp#exec called on incompatible receiver");return qy.call(t,e)},Xy=By,Jy=a,Hy=Bt,Zy=Le,Qy=De,tg=is,eg=w,ng=Uy,rg=function(t,e,n,r,o,i){var a=n+t.length,s=r.length,c=Vy;return void 0!==o&&(o=Wy(o),c=$y),Gy.call(i,c,(function(i,c){var u;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":u=o[c.slice(1,-1)];break;default:var f=+c;if(0===f)return i;if(f>s){var l=zy(f/10);return 0===l?i:l<=s?void 0===r[l-1]?c.charAt(1):r[l-1]+c.charAt(1):i}u=r[f-1]}return void 0===u?"":u}))},og=Yy,ig=pt("replace"),ag=Math.max,sg=Math.min,cg="$0"==="a".replace(/./,"$0"),ug=!!/./[ig]&&""===/./[ig]("a","$0"),fg=!Jy((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));Xy("replace",(function(t,e,n){var r=ug?"$":"$0";return[function(t,n){var r=eg(this),o=null==t?void 0:t[ig];return void 0!==o?o.call(t,r,n):e.call(tg(r),t,n)},function(t,o){var i=Hy(this),a=tg(t);if("string"==typeof o&&-1===o.indexOf(r)&&-1===o.indexOf("$<")){var s=n(e,i,a,o);if(s.done)return s.value}var c="function"==typeof o;c||(o=tg(o));var u=i.global;if(u){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var d=og(i,a);if(null===d)break;if(l.push(d),!u)break;""===tg(d[0])&&(i.lastIndex=ng(a,Qy(i.lastIndex),f))}for(var p,h="",v=0,y=0;y<l.length;y++){d=l[y];for(var g=tg(d[0]),m=ag(sg(Zy(d.index),a.length),0),b=[],w=1;w<d.length;w++)b.push(void 0===(p=d[w])?p:String(p));var x=d.groups;if(c){var k=[g].concat(b,m,a);void 0!==x&&k.push(x);var S=tg(o.apply(void 0,k))}else S=rg(g,a,m,b,x,o);m>=v&&(h+=a.slice(v,m)+S,v=m+g.length)}return h+a.slice(v)}]}),!fg||!cg||ug);var lg,dg,pg,hg={exports:{}},vg="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,yg=vg,gg=s,mg=o,bg=T,wg=tt,xg=Ki,kg=Kt,Sg=qt.exports,Tg=Nt.f,Eg=To,Og=Wo,_g=pt,Ag=rt,Rg=mg.Int8Array,Cg=Rg&&Rg.prototype,Ig=mg.Uint8ClampedArray,Pg=Ig&&Ig.prototype,jg=Rg&&Eg(Rg),Lg=Cg&&Eg(Cg),Mg=Object.prototype,Ng=Mg.isPrototypeOf,Dg=_g("toStringTag"),Bg=Ag("TYPED_ARRAY_TAG"),Fg=Ag("TYPED_ARRAY_CONSTRUCTOR"),Ug=yg&&!!Og&&"Opera"!==xg(mg.opera),Wg=!1,zg={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Gg={BigInt64Array:8,BigUint64Array:8},$g=function(t){if(!bg(t))return!1;var e=xg(t);return wg(zg,e)||wg(Gg,e)};for(lg in zg)(pg=(dg=mg[lg])&&dg.prototype)?kg(pg,Fg,dg):Ug=!1;for(lg in Gg)(pg=(dg=mg[lg])&&dg.prototype)&&kg(pg,Fg,dg);if((!Ug||"function"!=typeof jg||jg===Function.prototype)&&(jg=function(){throw TypeError("Incorrect invocation")},Ug))for(lg in zg)mg[lg]&&Og(mg[lg],jg);if((!Ug||!Lg||Lg===Mg)&&(Lg=jg.prototype,Ug))for(lg in zg)mg[lg]&&Og(mg[lg].prototype,Lg);if(Ug&&Eg(Pg)!==Lg&&Og(Pg,Lg),gg&&!wg(Lg,Dg))for(lg in Wg=!0,Tg(Lg,Dg,{get:function(){return bg(this)?this[Bg]:void 0}}),zg)mg[lg]&&kg(mg[lg],Bg,lg);var Vg={NATIVE_ARRAY_BUFFER_VIEWS:Ug,TYPED_ARRAY_CONSTRUCTOR:Fg,TYPED_ARRAY_TAG:Wg&&Bg,aTypedArray:function(t){if($g(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(Og&&!Ng.call(jg,t))throw TypeError("Target is not a typed array constructor");return t},exportTypedArrayMethod:function(t,e,n){if(gg){if(n)for(var r in zg){var o=mg[r];if(o&&wg(o.prototype,t))try{delete o.prototype[t]}catch(t){}}Lg[t]&&!n||Sg(Lg,t,n?e:Ug&&Cg[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,o;if(gg){if(Og){if(n)for(r in zg)if((o=mg[r])&&wg(o,t))try{delete o[t]}catch(t){}if(jg[t]&&!n)return;try{return Sg(jg,t,n?e:Ug&&jg[t]||e)}catch(t){}}for(r in zg)!(o=mg[r])||o[t]&&!n||Sg(o,t,e)}},isView:function(t){if(!bg(t))return!1;var e=xg(t);return"DataView"===e||wg(zg,e)||wg(Gg,e)},isTypedArray:$g,TypedArray:jg,TypedArrayPrototype:Lg},Kg=o,qg=a,Yg=ya,Xg=Vg.NATIVE_ARRAY_BUFFER_VIEWS,Jg=Kg.ArrayBuffer,Hg=Kg.Int8Array,Zg=!Xg||!qg((function(){Hg(1)}))||!qg((function(){new Hg(-1)}))||!Yg((function(t){new Hg,new Hg(null),new Hg(1.5),new Hg(t)}),!0)||qg((function(){return 1!==new Hg(new Jg(2),1,void 0).length})),Qg=Le,tm=De,em=function(t){if(void 0===t)return 0;var e=Qg(t),n=tm(e);if(e!==n)throw RangeError("Wrong length or index");return n},nm=Math.abs,rm=Math.pow,om=Math.floor,im=Math.log,am=Math.LN2,sm=H,cm=We,um=De,fm=function(t){for(var e=sm(this),n=um(e.length),r=arguments.length,o=cm(r>1?arguments[1]:void 0,n),i=r>2?arguments[2]:void 0,a=void 0===i?n:cm(i,n);a>o;)e[o++]=t;return e},lm=o,dm=s,pm=vg,hm=Kt,vm=La,ym=a,gm=la,mm=Le,bm=De,wm=em,xm={pack:function(t,e,n){var r,o,i,a=new Array(n),s=8*n-e-1,c=(1<<s)-1,u=c>>1,f=23===e?rm(2,-24)-rm(2,-77):0,l=t<0||0===t&&1/t<0?1:0,d=0;for((t=nm(t))!=t||t===1/0?(o=t!=t?1:0,r=c):(r=om(im(t)/am),t*(i=rm(2,-r))<1&&(r--,i*=2),(t+=r+u>=1?f/i:f*rm(2,1-u))*i>=2&&(r++,i/=2),r+u>=c?(o=0,r=c):r+u>=1?(o=(t*i-1)*rm(2,e),r+=u):(o=t*rm(2,u-1)*rm(2,e),r=0));e>=8;a[d++]=255&o,o/=256,e-=8);for(r=r<<e|o,s+=e;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*l,a},unpack:function(t,e){var n,r=t.length,o=8*r-e-1,i=(1<<o)-1,a=i>>1,s=o-7,c=r-1,u=t[c--],f=127&u;for(u>>=7;s>0;f=256*f+t[c],c--,s-=8);for(n=f&(1<<-s)-1,f>>=-s,s+=e;s>0;n=256*n+t[c],c--,s-=8);if(0===f)f=1-a;else{if(f===i)return n?NaN:u?-1/0:1/0;n+=rm(2,e),f-=a}return(u?-1:1)*n*rm(2,f-e)}},km=To,Sm=Wo,Tm=Ie.f,Em=Nt.f,Om=fm,_m=In,Am=ke.get,Rm=ke.set,Cm="ArrayBuffer",Im="DataView",Pm="Wrong index",jm=lm.ArrayBuffer,Lm=jm,Mm=lm.DataView,Nm=Mm&&Mm.prototype,Dm=Object.prototype,Bm=lm.RangeError,Fm=xm.pack,Um=xm.unpack,Wm=function(t){return[255&t]},zm=function(t){return[255&t,t>>8&255]},Gm=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},$m=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Vm=function(t){return Fm(t,23,4)},Km=function(t){return Fm(t,52,8)},qm=function(t,e){Em(t.prototype,e,{get:function(){return Am(this)[e]}})},Ym=function(t,e,n,r){var o=wm(n),i=Am(t);if(o+e>i.byteLength)throw Bm(Pm);var a=Am(i.buffer).bytes,s=o+i.byteOffset,c=a.slice(s,s+e);return r?c:c.reverse()},Xm=function(t,e,n,r,o,i){var a=wm(n),s=Am(t);if(a+e>s.byteLength)throw Bm(Pm);for(var c=Am(s.buffer).bytes,u=a+s.byteOffset,f=r(+o),l=0;l<e;l++)c[u+l]=f[i?l:e-l-1]};if(pm){if(!ym((function(){jm(1)}))||!ym((function(){new jm(-1)}))||ym((function(){return new jm,new jm(1.5),new jm(NaN),jm.name!=Cm}))){for(var Jm,Hm=(Lm=function(t){return gm(this,Lm),new jm(wm(t))}).prototype=jm.prototype,Zm=Tm(jm),Qm=0;Zm.length>Qm;)(Jm=Zm[Qm++])in Lm||hm(Lm,Jm,jm[Jm]);Hm.constructor=Lm}Sm&&km(Nm)!==Dm&&Sm(Nm,Dm);var tb=new Mm(new Lm(2)),eb=Nm.setInt8;tb.setInt8(0,2147483648),tb.setInt8(1,2147483649),!tb.getInt8(0)&&tb.getInt8(1)||vm(Nm,{setInt8:function(t,e){eb.call(this,t,e<<24>>24)},setUint8:function(t,e){eb.call(this,t,e<<24>>24)}},{unsafe:!0})}else Lm=function(t){gm(this,Lm,Cm);var e=wm(t);Rm(this,{bytes:Om.call(new Array(e),0),byteLength:e}),dm||(this.byteLength=e)},Mm=function(t,e,n){gm(this,Mm,Im),gm(t,Lm,Im);var r=Am(t).byteLength,o=mm(e);if(o<0||o>r)throw Bm("Wrong offset");if(o+(n=void 0===n?r-o:bm(n))>r)throw Bm("Wrong length");Rm(this,{buffer:t,byteLength:n,byteOffset:o}),dm||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},dm&&(qm(Lm,"byteLength"),qm(Mm,"buffer"),qm(Mm,"byteLength"),qm(Mm,"byteOffset")),vm(Mm.prototype,{getInt8:function(t){return Ym(this,1,t)[0]<<24>>24},getUint8:function(t){return Ym(this,1,t)[0]},getInt16:function(t){var e=Ym(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Ym(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return $m(Ym(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return $m(Ym(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Um(Ym(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Um(Ym(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Xm(this,1,t,Wm,e)},setUint8:function(t,e){Xm(this,1,t,Wm,e)},setInt16:function(t,e){Xm(this,2,t,zm,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Xm(this,2,t,zm,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Xm(this,4,t,Gm,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Xm(this,4,t,Gm,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Xm(this,4,t,Vm,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Xm(this,8,t,Km,e,arguments.length>2?arguments[2]:void 0)}});_m(Lm,Cm),_m(Mm,Im);var nb=Le,rb=function(t){var e=nb(t);if(e<0)throw RangeError("The argument can't be less than 0");return e},ob=function(t,e){var n=rb(t);if(n%e)throw RangeError("Wrong offset");return n},ib=H,ab=De,sb=Qi,cb=Ji,ub=Di,fb=Fi,lb=Vg.aTypedArrayConstructor,db=_n,pb=o,hb=s,vb=Zg,yb=Vg,gb={ArrayBuffer:Lm,DataView:Mm},mb=la,bb=h,wb=Kt,xb=Mh,kb=De,Sb=em,Tb=ob,Eb=xt,Ob=tt,_b=Ki,Ab=T,Rb=W,Cb=er,Ib=Wo,Pb=Ie.f,jb=function(t){var e,n,r,o,i,a,s=ib(t),c=arguments.length,u=c>1?arguments[1]:void 0,f=void 0!==u,l=cb(s);if(null!=l&&!ub(l))for(a=(i=sb(s,l)).next,s=[];!(o=a.call(i)).done;)s.push(o.value);for(f&&c>2&&(u=fb(u,arguments[2],2)),n=ab(s.length),r=new(lb(this))(n),e=0;n>e;e++)r[e]=f?u(s[e],e):s[e];return r},Lb=gc.forEach,Mb=Fa,Nb=Nt,Db=i,Bb=ba,Fb=ke.get,Ub=ke.set,Wb=Nb.f,zb=Db.f,Gb=Math.round,$b=pb.RangeError,Vb=gb.ArrayBuffer,Kb=gb.DataView,qb=yb.NATIVE_ARRAY_BUFFER_VIEWS,Yb=yb.TYPED_ARRAY_CONSTRUCTOR,Xb=yb.TYPED_ARRAY_TAG,Jb=yb.TypedArray,Hb=yb.TypedArrayPrototype,Zb=yb.aTypedArrayConstructor,Qb=yb.isTypedArray,tw="BYTES_PER_ELEMENT",ew="Wrong length",nw=function(t,e){for(var n=0,r=e.length,o=new(Zb(t))(r);r>n;)o[n]=e[n++];return o},rw=function(t,e){Wb(t,e,{get:function(){return Fb(this)[e]}})},ow=function(t){var e;return t instanceof Vb||"ArrayBuffer"==(e=_b(t))||"SharedArrayBuffer"==e},iw=function(t,e){return Qb(t)&&!Rb(e)&&e in t&&xb(+e)&&e>=0},aw=function(t,e){return e=Eb(e),iw(t,e)?bb(2,t[e]):zb(t,e)},sw=function(t,e,n){return e=Eb(e),!(iw(t,e)&&Ab(n)&&Ob(n,"value"))||Ob(n,"get")||Ob(n,"set")||n.configurable||Ob(n,"writable")&&!n.writable||Ob(n,"enumerable")&&!n.enumerable?Wb(t,e,n):(t[e]=n.value,t)};hb?(qb||(Db.f=aw,Nb.f=sw,rw(Hb,"buffer"),rw(Hb,"byteOffset"),rw(Hb,"byteLength"),rw(Hb,"length")),db({target:"Object",stat:!0,forced:!qb},{getOwnPropertyDescriptor:aw,defineProperty:sw}),hg.exports=function(t,e,n){var r=t.match(/\d+$/)[0]/8,o=t+(n?"Clamped":"")+"Array",i="get"+t,a="set"+t,s=pb[o],c=s,u=c&&c.prototype,f={},l=function(t,e){Wb(t,e,{get:function(){return function(t,e){var n=Fb(t);return n.view[i](e*r+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,o){var i=Fb(t);n&&(o=(o=Gb(o))<0?0:o>255?255:255&o),i.view[a](e*r+i.byteOffset,o,!0)}(this,e,t)},enumerable:!0})};qb?vb&&(c=e((function(t,e,n,i){return mb(t,c,o),Bb(Ab(e)?ow(e)?void 0!==i?new s(e,Tb(n,r),i):void 0!==n?new s(e,Tb(n,r)):new s(e):Qb(e)?nw(c,e):jb.call(c,e):new s(Sb(e)),t,c)})),Ib&&Ib(c,Jb),Lb(Pb(s),(function(t){t in c||wb(c,t,s[t])})),c.prototype=u):(c=e((function(t,e,n,i){mb(t,c,o);var a,s,u,f=0,d=0;if(Ab(e)){if(!ow(e))return Qb(e)?nw(c,e):jb.call(c,e);a=e,d=Tb(n,r);var p=e.byteLength;if(void 0===i){if(p%r)throw $b(ew);if((s=p-d)<0)throw $b(ew)}else if((s=kb(i)*r)+d>p)throw $b(ew);u=s/r}else u=Sb(e),a=new Vb(s=u*r);for(Ub(t,{buffer:a,byteOffset:d,byteLength:s,length:u,view:new Kb(a)});f<u;)l(t,f++)})),Ib&&Ib(c,Jb),u=c.prototype=Cb(Hb)),u.constructor!==c&&wb(u,"constructor",c),wb(u,Yb,c),Xb&&wb(u,Xb,o),f[o]=c,db({global:!0,forced:c!=s,sham:!qb},f),tw in c||wb(c,tw,r),tw in u||wb(u,tw,r),Mb(o)}):hg.exports=function(){},(0,hg.exports)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var cw=H,uw=We,fw=De,lw=Math.min,dw=[].copyWithin||function(t,e){var n=cw(this),r=fw(n.length),o=uw(t,r),i=uw(e,r),a=arguments.length>2?arguments[2]:void 0,s=lw((void 0===a?r:uw(a,r))-i,r-o),c=1;for(i<o&&o<i+s&&(c=-1,i+=s-1,o+=s-1);s-- >0;)i in n?n[o]=n[i]:delete n[o],o+=c,i+=c;return n},pw=dw,hw=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("copyWithin",(function(t,e){return pw.call(hw(this),t,e,arguments.length>2?arguments[2]:void 0)}));var vw=gc.every,yw=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("every",(function(t){return vw(yw(this),t,arguments.length>1?arguments[1]:void 0)}));var gw=fm,mw=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("fill",(function(t){return gw.apply(mw(this),arguments)}));var bw=Dc,ww=Vg.TYPED_ARRAY_CONSTRUCTOR,xw=Vg.aTypedArrayConstructor,kw=function(t){return xw(bw(t,t[ww]))},Sw=function(t,e){for(var n=0,r=e.length,o=new t(r);r>n;)o[n]=e[n++];return o},Tw=kw,Ew=gc.filter,Ow=function(t,e){return Sw(Tw(t),e)},_w=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("filter",(function(t){var e=Ew(_w(this),t,arguments.length>1?arguments[1]:void 0);return Ow(this,e)}));var Aw=gc.find,Rw=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("find",(function(t){return Aw(Rw(this),t,arguments.length>1?arguments[1]:void 0)}));var Cw=gc.findIndex,Iw=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("findIndex",(function(t){return Cw(Iw(this),t,arguments.length>1?arguments[1]:void 0)}));var Pw=gc.forEach,jw=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("forEach",(function(t){Pw(jw(this),t,arguments.length>1?arguments[1]:void 0)}));var Lw=Ke.includes,Mw=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("includes",(function(t){return Lw(Mw(this),t,arguments.length>1?arguments[1]:void 0)}));var Nw=Ke.indexOf,Dw=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("indexOf",(function(t){return Nw(Dw(this),t,arguments.length>1?arguments[1]:void 0)}));var Bw=o,Fw=Vg,Uw=di,Ww=pt("iterator"),zw=Bw.Uint8Array,Gw=Uw.values,$w=Uw.keys,Vw=Uw.entries,Kw=Fw.aTypedArray,qw=Fw.exportTypedArrayMethod,Yw=zw&&zw.prototype[Ww],Xw=!!Yw&&("values"==Yw.name||null==Yw.name),Jw=function(){return Gw.call(Kw(this))};qw("entries",(function(){return Vw.call(Kw(this))})),qw("keys",(function(){return $w.call(Kw(this))})),qw("values",Jw,!Xw),qw(Ww,Jw,!Xw);var Hw=Vg.aTypedArray,Zw=[].join;(0,Vg.exportTypedArrayMethod)("join",(function(t){return Zw.apply(Hw(this),arguments)}));var Qw=S,tx=Le,ex=De,nx=bc,rx=Math.min,ox=[].lastIndexOf,ix=!!ox&&1/[1].lastIndexOf(1,-0)<0,ax=nx("lastIndexOf"),sx=ix||!ax?function(t){if(ix)return ox.apply(this,arguments)||0;var e=Qw(this),n=ex(e.length),r=n-1;for(arguments.length>1&&(r=rx(r,tx(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:ox,cx=sx,ux=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("lastIndexOf",(function(t){return cx.apply(ux(this),arguments)}));var fx=gc.map,lx=kw,dx=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("map",(function(t){return fx(dx(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(lx(t))(e)}))}));var px=Mn,hx=H,vx=b,yx=De,gx=function(t){return function(e,n,r,o){px(n);var i=hx(e),a=vx(i),s=yx(i.length),c=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(c in a){o=a[c],c+=u;break}if(c+=u,t?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:s>c;c+=u)c in a&&(o=n(o,a[c],c,i));return o}},mx={left:gx(!1),right:gx(!0)},bx=mx.left,wx=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("reduce",(function(t){return bx(wx(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var xx=mx.right,kx=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("reduceRight",(function(t){return xx(kx(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Sx=Vg.aTypedArray,Tx=Vg.exportTypedArrayMethod,Ex=Math.floor;Tx("reverse",(function(){for(var t,e=this,n=Sx(e).length,r=Ex(n/2),o=0;o<r;)t=e[o],e[o++]=e[--n],e[n]=t;return e}));var Ox=De,_x=ob,Ax=H,Rx=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("set",(function(t){Rx(this);var e=_x(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=Ax(t),o=Ox(r.length),i=0;if(o+e>n)throw RangeError("Wrong length");for(;i<o;)this[e+i]=r[i++]}),a((function(){new Int8Array(1).set({})})));var Cx=kw,Ix=Vg.aTypedArray,Px=[].slice;(0,Vg.exportTypedArrayMethod)("slice",(function(t,e){for(var n=Px.call(Ix(this),t,e),r=Cx(this),o=0,i=n.length,a=new r(i);i>o;)a[o]=n[o++];return a}),a((function(){new Int8Array(1).slice()})));var jx=gc.some,Lx=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("some",(function(t){return jx(Lx(this),t,arguments.length>1?arguments[1]:void 0)}));var Mx=Math.floor,Nx=function(t,e){var n=t.length,r=Mx(n/2);return n<8?Dx(t,e):Bx(Nx(t.slice(0,r),e),Nx(t.slice(r),e),e)},Dx=function(t,e){for(var n,r,o=t.length,i=1;i<o;){for(r=i,n=t[i];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},Bx=function(t,e,n){for(var r=t.length,o=e.length,i=0,a=0,s=[];i<r||a<o;)i<r&&a<o?s.push(n(t[i],e[a])<=0?t[i++]:e[a++]):s.push(i<r?t[i++]:e[a++]);return s},Fx=Nx,Ux=A.match(/firefox\/(\d+)/i),Wx=!!Ux&&+Ux[1],zx=/MSIE|Trident/.test(A),Gx=A.match(/AppleWebKit\/(\d+)\./),$x=!!Gx&&+Gx[1],Vx=a,Kx=Mn,qx=De,Yx=Fx,Xx=Wx,Jx=zx,Hx=M,Zx=$x,Qx=Vg.aTypedArray,tk=Vg.exportTypedArrayMethod,ek=o.Uint16Array,nk=ek&&ek.prototype.sort,rk=!!nk&&!Vx((function(){var t=new ek(2);t.sort(null),t.sort({})})),ok=!!nk&&!Vx((function(){if(Hx)return Hx<74;if(Xx)return Xx<67;if(Jx)return!0;if(Zx)return Zx<602;var t,e,n=new ek(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(n.sort((function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));tk("sort",(function(t){var e=this;if(void 0!==t&&Kx(t),ok)return nk.call(e,t);Qx(e);var n,r=qx(e.length),o=Array(r);for(n=0;n<r;n++)o[n]=e[n];for(o=Yx(e,function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t)),n=0;n<r;n++)e[n]=o[n];return e}),!ok||rk);var ik=De,ak=We,sk=kw,ck=Vg.aTypedArray;(0,Vg.exportTypedArrayMethod)("subarray",(function(t,e){var n=ck(this),r=n.length,o=ak(t,r);return new(sk(n))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,ik((void 0===e?r:ak(e,r))-o))}));var uk=Vg,fk=a,lk=o.Int8Array,dk=uk.aTypedArray,pk=uk.exportTypedArrayMethod,hk=[].toLocaleString,vk=[].slice,yk=!!lk&&fk((function(){hk.call(new lk(1))}));pk("toLocaleString",(function(){return hk.apply(yk?vk.call(dk(this)):dk(this),arguments)}),fk((function(){return[1,2].toLocaleString()!=new lk([1,2]).toLocaleString()}))||!fk((function(){lk.prototype.toLocaleString.call([1,2])})));var gk=Vg.exportTypedArrayMethod,mk=a,bk=o.Uint8Array,wk=bk&&bk.prototype||{},xk=[].toString,kk=[].join;mk((function(){xk.call({})}))&&(xk=function(){return kk.call(this)});var Sk=wk.toString!=xk;gk("toString",xk,Sk);var Tk=T,Ek=y,Ok=pt("match"),_k=By,Ak=function(t){var e;return Tk(t)&&(void 0!==(e=t[Ok])?!!e:"RegExp"==Ek(t))},Rk=Bt,Ck=w,Ik=Dc,Pk=Uy,jk=De,Lk=is,Mk=Yy,Nk=jd,Dk=a,Bk=cd.UNSUPPORTED_Y,Fk=[].push,Uk=Math.min,Wk=4294967295,zk=!Dk((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));_k("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=Lk(Ck(this)),o=void 0===n?Wk:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!Ak(t))return e.call(r,t,o);for(var i,a,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,l=new RegExp(t.source,u+"g");(i=Nk.call(l,r))&&!((a=l.lastIndex)>f&&(c.push(r.slice(f,i.index)),i.length>1&&i.index<r.length&&Fk.apply(c,i.slice(1)),s=i[0].length,f=a,c.length>=o));)l.lastIndex===i.index&&l.lastIndex++;return f===r.length?!s&&l.test("")||c.push(""):c.push(r.slice(f)),c.length>o?c.slice(0,o):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=Ck(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(Lk(o),e,n)},function(t,o){var i=Rk(this),a=Lk(t),s=n(r,i,a,o,r!==e);if(s.done)return s.value;var c=Ik(i,RegExp),u=i.unicode,f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Bk?"g":"y"),l=new c(Bk?"^(?:"+i.source+")":i,f),d=void 0===o?Wk:o>>>0;if(0===d)return[];if(0===a.length)return null===Mk(l,a)?[a]:[];for(var p=0,h=0,v=[];h<a.length;){l.lastIndex=Bk?0:h;var y,g=Mk(l,Bk?a.slice(h):a);if(null===g||(y=Uk(jk(l.lastIndex+(Bk?h:0)),a.length))===p)h=Pk(a,h,u);else{if(v.push(a.slice(p,h)),v.length===d)return v;for(var m=1;m<=g.length-1;m++)if(v.push(g[m]),v.length===d)return v;h=p=y}}return v.push(a.slice(p)),v}]}),!zk,Bk);var Gk={exports:{}},$k={exports:{}};!function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports}($k);var Vk={exports:{}},Kk={exports:{}};!function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports}(Kk),function(t){var e=hl.exports,n=Kk.exports;function r(o,i,a){return n()?(t.exports=r=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=r=function(t,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(t,o));return r&&e(i,r.prototype),i},t.exports.__esModule=!0,t.exports.default=t.exports),r.apply(null,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(Vk),function(t){var e=dl.exports,n=hl.exports,r=$k.exports,o=Vk.exports;function i(a){var s="function"==typeof Map?new Map:void 0;return t.exports=i=function(t){if(null===t||!r(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==s){if(s.has(t))return s.get(t);s.set(t,i)}function i(){return o(t,arguments,e(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n(i,t)},t.exports.__esModule=!0,t.exports.default=t.exports,i(a)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}(Gk);var qk=H,Yk=Bn;_n({target:"Object",stat:!0,forced:a((function(){Yk(1)}))},{keys:function(t){return Yk(qk(t))}});var Xk=gc.filter;_n({target:"Array",proto:!0,forced:!qs("filter")},{filter:function(t){return Xk(this,t,arguments.length>1?arguments[1]:void 0)}});var Jk=_n,Hk=a,Zk=S,Qk=i.f,tS=s,eS=Hk((function(){Qk(1)}));Jk({target:"Object",stat:!0,forced:!tS||eS,sham:!tS},{getOwnPropertyDescriptor:function(t,e){return Qk(Zk(t),e)}});var nS=an,rS=S,oS=i,iS=Bs;_n({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){for(var e,n,r=rS(t),o=oS.f,i=nS(r),a={},s=0;i.length>s;)void 0!==(n=o(r,e=i[s++]))&&iS(a,e,n);return a}});var aS={};Object.defineProperty(aS,"__esModule",{value:!0});var sS=sl.exports,cS=ul.exports,uS=pl.exports,fS=vl.exports,lS=dl.exports,dS=ml.exports;function pS(t){return t&&"object"===Or(t)&&"default"in t?t:{default:t}}var hS=pS(gl.exports),vS=pS(sS),yS=pS(cS),gS=pS(uS),mS=pS(fS),bS=pS(lS),wS=pS(dS);function xS(){}function kS(){kS.init.call(this)}function SS(t){return void 0===t._maxListeners?kS.defaultMaxListeners:t._maxListeners}function TS(t,e,n){if(e)t.call(n);else for(var r=t.length,o=PS(t,r),i=0;i<r;++i)o[i].call(n)}function ES(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=PS(t,o),a=0;a<o;++a)i[a].call(n,r)}function OS(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=PS(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function _S(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=PS(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function AS(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=PS(t,o),a=0;a<o;++a)i[a].apply(n,r)}function RS(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new xS,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=SS(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function CS(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function IS(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function PS(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function jS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bS.default(t);if(e){var o=bS.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mS.default(this,n)}}xS.prototype=Object.create(null),kS.EventEmitter=kS,kS.usingDomains=!1,kS.prototype.domain=void 0,kS.prototype._events=void 0,kS.prototype._maxListeners=void 0,kS.defaultMaxListeners=10,kS.init=function(){this.domain=null,kS.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new xS,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},kS.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},kS.prototype.getMaxListeners=function(){return SS(this)},kS.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:TS(n,f,this);break;case 2:ES(n,f,this,arguments[1]);break;case 3:OS(n,f,this,arguments[1],arguments[2]);break;case 4:_S(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];AS(n,f,this,o)}return!0},kS.prototype.addListener=function(t,e){return RS(this,t,e,!1)},kS.prototype.on=kS.prototype.addListener,kS.prototype.prependListener=function(t,e){return RS(this,t,e,!0)},kS.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,CS(this,t,e)),this},kS.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,CS(this,t,e)),this},kS.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new xS:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new xS,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},kS.prototype.off=function(t,e){return this.removeListener(t,e)},kS.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new xS,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new xS:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new xS,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},kS.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[],n},kS.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):IS.call(t,e)},kS.prototype.listenerCount=IS,kS.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var LS=function(t){gS.default(n,t);var e=jS(n);function n(t){var r;return hS.default(this,n),r=e.call(this),wS.default(yS.default(r),"timeout",null),wS.default(yS.default(r),"startTimestamp",-1),r.minDelay=t.min,r.maxDelay=t.max,r.initialDelay=t.initial||0,r.maxAttemptsCount=t.maxAttemptsCount||0,r.maxAttemptsTime=t.maxAttemptsTime||0,r.randomness=t.randomness||0,r.inProgress=!1,r.attemptNum=0,r.prevDelay=0,r.currDelay=0,r}return vS.default(n,[{key:"attempt",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.attemptNum++,this.emit("attempt",this)}},{key:"nextDelay",value:function(t){if("number"==typeof t)return this.prevDelay=0,this.currDelay=t,t;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;var e=this.currDelay+this.prevDelay;return this.maxDelay&&e>this.maxDelay&&(this.currDelay=this.maxDelay,e=this.maxDelay),this.currDelay=e,e}},{key:"randomize",value:function(t){var e=t*this.randomness,n=Math.round(Math.random()*e*2-e);return Math.max(0,t+n)}},{key:"scheduleAttempt",value:function(t){var e=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt count limit reached"));var n=this.nextDelay(t);if(n=this.randomize(n),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+n)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt time limit reached"));this.timeout=setTimeout((function(){return e.attempt()}),n)}},{key:"cleanup",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}},{key:"start",value:function(){if(this.inProgress)throw new Error("Retrier is already in progress");this.inProgress=!0,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)}},{key:"cancel",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"))}},{key:"succeeded",value:function(t){this.emit("succeeded",t)}},{key:"failed",value:function(t,e){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(e)}}]),n}(kS),MS=function(t){gS.default(n,t);var e=jS(n);function n(t){var r;return hS.default(this,n),r=e.call(this),wS.default(yS.default(r),"resolve",(function(){})),wS.default(yS.default(r),"reject",(function(){})),r.retrier=new LS(t),r}return vS.default(n,[{key:"run",value:function(t){var e=this;return this.retrier.on("attempt",(function(){t().then((function(t){return e.retrier.succeeded(t)})).catch((function(t){return e.retrier.failed(t)}))})),this.retrier.on("succeeded",(function(t){return e.resolve(t)})),this.retrier.on("cancelled",(function(){return e.reject(new Error("Cancelled"))})),this.retrier.on("failed",(function(t){return e.reject(t)})),new Promise((function(t,n){e.resolve=t,e.reject=n,e.retrier.start()}))}},{key:"cancel",value:function(){this.retrier.cancel()}}]),n}(kS);function NS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bS.default(t);if(e){var o=bS.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mS.default(this,n)}}function DS(t){return null!=t}var BS=function(t){gS.default(n,t);var e=NS(n);function n(t){var r;hS.default(this,n),r=e.call(this),wS.default(yS.default(r),"backoffDelay",0),wS.default(yS.default(r),"nextBackoffDelay",0),wS.default(yS.default(r),"backoffNumber",0),wS.default(yS.default(r),"timeoutID",null),wS.default(yS.default(r),"maxNumberOfRetry",-1);var o=t=t||{},i=o.initialDelay,a=o.maxDelay,s=o.randomisationFactor,c=o.factor;if(DS(i)&&i<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(DS(a)&&a<=1)throw new Error("The maximal timeout must be greater than 1.");if(DS(s)&&(s<0||s>1))throw new Error("The randomisation factor must be between 0 and 1.");if(DS(c)&&c<=1)throw new Error("Exponential factor should be greater than 1.");if(r.initialDelay=i||100,r.maxDelay=a||1e4,r.maxDelay<=r.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");return r.randomisationFactor=s||0,r.factor=c||2,r.reset(),r}return vS.default(n,[{key:"backoff",value:function(t){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",t),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,t)))}},{key:"reset",value:function(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"failAfter",value:function(t){if(t<=0)throw new Error("Expected a maximum number of retry greater than 0 but got ".concat(t));this.maxNumberOfRetry=t}},{key:"next",value:function(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;var t=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*t))}},{key:"onBackoff",value:function(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}],[{key:"exponential",value:function(t){return new n(t)}}]),n}(kS),FS=aS.AsyncRetrier=MS;aS.Backoff=BS,aS.Retrier=LS;var US={exports:{}};!function(t,n){(function(){var r={function:!0,object:!0}["undefined"==typeof window?"undefined":Or(window)]&&window||this,o=n,i=t&&!t.nodeType&&t,a=o&&i&&"object"==Or(e)&&e;!a||a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s=Math.pow(2,53)-1,c=/\bOpera/,u=Object.prototype,f=u.hasOwnProperty,l=u.toString;function d(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function p(t){return t=m(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:d(t)}function h(t,e){for(var n in t)f.call(t,n)&&e(t[n],n,t)}function v(t){return null==t?d(t):l.call(t).slice(8,-1)}function y(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function g(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=s)for(;++n<r;)e(t[n],n,t);else h(t,e)}(t,(function(r,o){n=e(n,r,o,t)})),n}function m(t){return String(t).replace(/^ +| +$/g,"")}var b=function t(e){var n=r,o=e&&"object"==Or(e)&&"String"!=v(e);o&&(n=e,e=null);var i=n.navigator||{},a=i.userAgent||"";e||(e=a);var s,u,f=o?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(l.toString()),d="Object",b=o?d:"ScriptBridgingProxyObject",w=o?d:"Environment",x=o&&n.java?"JavaPackage":v(n.java),k=o?d:"RuntimeObject",S=/\bJava/.test(x)&&n.java,T=S&&v(n.environment)==w,E=S?"a":"Î±",O=S?"b":"Î²",_=n.document||{},A=n.operamini||n.opera,R=c.test(R=o&&A?A["[[Class]]"]:v(A))?R:A=null,C=e,I=[],P=null,j=e==a,L=j&&A&&"function"==typeof A.version&&A.version(),M=g([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)})),N=function(t){return g(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),D=U([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),B=function(t){return g(t,(function(t,n,r){return t||(n[D]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(D)]||RegExp("\\b"+y(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),F=function(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),p(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function U(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=p(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function W(t){return g(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}if(M&&(M=[M]),/\bAndroid\b/.test(F)&&!D&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(D=m(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),B&&!D?D=U([B]):B&&D&&(D=D.replace(RegExp("^("+y(B)+")[-_.\\s]","i"),B+" ").replace(RegExp("^("+y(B)+")[-_.]?(\\w)","i"),B+" $2")),(s=/\bGoogle TV\b/.exec(D))&&(D=s[0]),/\bSimulator\b/i.test(e)&&(D=(D?D+" ":"")+"Simulator"),"Opera Mini"==N&&/\bOPiOS\b/.test(e)&&I.push("running in Turbo/Uncompressed mode"),"IE"==N&&/\blike iPhone OS\b/.test(e)?(B=(s=t(e.replace(/like iPhone OS/,""))).manufacturer,D=s.product):/^iP/.test(D)?(N||(N="Safari"),F="iOS"+((s=/ OS ([\d_]+)/i.exec(e))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==N&&/^Linux\b/i.test(F)?F="Kubuntu":B&&"Google"!=B&&(/Chrome/.test(N)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(D))||/\bAndroid\b/.test(F)&&/^Chrome/.test(N)&&/\bVersion\//i.test(e)?(N="Android Browser",F=/\bAndroid\b/.test(F)?F:"Android"):"Silk"==N?(/\bMobi/i.test(e)||(F="Android",I.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&I.unshift("accelerated")):"UC Browser"==N&&/\bUCWEB\b/.test(e)?I.push("speed mode"):"PaleMoon"==N&&(s=/\bFirefox\/([\d.]+)\b/.exec(e))?I.push("identifying as Firefox "+s[1]):"Firefox"==N&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(F||(F="Firefox OS"),D||(D=s[1])):!N||(s=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(N))?(N&&!D&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(s+"/")+8))&&(N=null),(s=D||B||F)&&(D||B||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(F))&&(N=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(F)?F:s)+" Browser")):"Electron"==N&&(s=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&I.push("Chromium "+s),L||(L=W(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(N),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==M&&parseFloat(L)>3?"WebKit":/\bOpera\b/.test(N)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(M)&&"WebKit"||!M&&/\bMSIE\b/i.test(e)&&("Mac OS"==F?"Tasman":"Trident")||"WebKit"==M&&/\bPlayStation\b(?! Vita\b)/i.test(N)&&"NetFront")&&(M=[s]),"IE"==N&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(N+=" Mobile",F="Windows Phone "+(/\+$/.test(s)?s:s+".x"),I.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(N="IE Mobile",F="Windows Phone 8.x",I.unshift("desktop mode"),L||(L=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=N&&"Trident"==M&&(s=/\brv:([\d.]+)/.exec(e))&&(N&&I.push("identifying as "+N+(L?" "+L:"")),N="IE",L=s[1]),j){if(function(t,e){var n=null!=t?Or(t[e]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!t[e])}(n,"global"))if(S&&(C=(s=S.lang.System).getProperty("os.arch"),F=F||s.getProperty("os.name")+" "+s.getProperty("os.version")),T){try{L=n.require("ringo/engine").version.join("."),N="RingoJS"}catch(t){(s=n.system)&&s.global.system==n.system&&(N="Narwhal",F||(F=s[0].os||null))}N||(N="Rhino")}else"object"==Or(n.process)&&!n.process.browser&&(s=n.process)&&("object"==Or(s.versions)&&("string"==typeof s.versions.electron?(I.push("Node "+s.versions.node),N="Electron",L=s.versions.electron):"string"==typeof s.versions.nw&&(I.push("Chromium "+L,"Node "+s.versions.node),N="NW.js",L=s.versions.nw)),N||(N="Node.js",C=s.arch,F=s.platform,L=(L=/[\d.]+/.exec(s.version))?L[0]:null));else v(s=n.runtime)==b?(N="Adobe AIR",F=s.flash.system.Capabilities.os):v(s=n.phantom)==k?(N="PhantomJS",L=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof _.documentMode&&(s=/\bTrident\/(\d+)/i.exec(e))?(L=[L,_.documentMode],(s=+s[1]+4)!=L[1]&&(I.push("IE "+L[1]+" mode"),M&&(M[1]=""),L[1]=s),L="IE"==N?String(L[1].toFixed(1)):L[0]):"number"==typeof _.documentMode&&/^(?:Chrome|Firefox)\b/.test(N)&&(I.push("masking as "+N+" "+L),N="IE",L="11.0",M=["Trident"],F="Windows");F=F&&p(F)}if(L&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(j&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(P=/b/i.test(s)?"beta":"alpha",L=L.replace(RegExp(s+"\\+?$"),"")+("beta"==P?O:E)+(/\d+\+?/.exec(s)||"")),"Fennec"==N||"Firefox"==N&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(F))N="Firefox Mobile";else if("Maxthon"==N&&L)L=L.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(D))"Xbox 360"==D&&(F=null),"Xbox 360"==D&&/\bIEMobile\b/.test(e)&&I.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(N)&&(!N||D||/Browser|Mobi/.test(N))||"Windows CE"!=F&&!/Mobi/i.test(e))if("IE"==N&&j)try{null===n.external&&I.unshift("platform preview")}catch(t){I.unshift("embedded")}else(/\bBlackBerry\b/.test(D)||/\bBB10\b/.test(e))&&(s=(RegExp(D.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||L)?(F=((s=[s,/BB10/.test(e)])[1]?(D=null,B="BlackBerry"):"Device Software")+" "+s[0],L=null):this!=h&&"Wii"!=D&&(j&&A||/Opera/.test(N)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==N&&/\bOS X (?:\d+\.){2,}/.test(F)||"IE"==N&&(F&&!/^Win/.test(F)&&L>5.5||/\bWindows XP\b/.test(F)&&L>8||8==L&&!/\bTrident\b/.test(e)))&&!c.test(s=t.call(h,e.replace(c,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),c.test(N)?(/\bIE\b/.test(s)&&"Mac OS"==F&&(F=null),s="identify"+s):(s="mask"+s,N=R?p(R.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(F=null),j||(L=null)),M=["Presto"],I.push(s));else N+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==N&&"+"==s[1].slice(-1)?(N="WebKit Nightly",P="alpha",L=s[1].slice(0,-1)):L!=s[1]&&L!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(L=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==M&&(M=["Blink"]),j&&(f||s[1])?(M&&(M[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=M?"27":"28")):(M&&(M[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),M&&(M[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==N&&(!L||parseInt(L)>45)?L=s:"Chrome"==N&&/\bHeadlessChrome/i.test(e)&&I.unshift("headless")),"Opera"==N&&(s=/\bzbov|zvav$/.exec(F))?(N+=" ",I.unshift("desktop mode"),"zvav"==s?(N+="Mini",L=null):N+="Mobile",F=F.replace(RegExp(" *"+s+"$"),"")):"Safari"==N&&/\bChrome\b/.exec(M&&M[1])?(I.unshift("desktop mode"),N="Chrome Mobile",L=null,/\bOS X\b/.test(F)?(B="Apple",F="iOS 4.3+"):F=null):/\bSRWare Iron\b/.test(N)&&!L&&(L=W("Chrome")),L&&0==L.indexOf(s=/[\d.]+$/.exec(F))&&e.indexOf("/"+s+"-")>-1&&(F=m(F.replace(s,""))),F&&-1!=F.indexOf(N)&&!RegExp(N+" OS").test(F)&&(F=F.replace(RegExp(" *"+y(N)+" *"),"")),M&&!/\b(?:Avant|Nook)\b/.test(N)&&(/Browser|Lunascape|Maxthon/.test(N)||"Safari"!=N&&/^iOS/.test(F)&&/\bSafari\b/.test(M[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(N)&&M[1])&&(s=M[M.length-1])&&I.push(s),I.length&&(I=["("+I.join("; ")+")"]),B&&D&&D.indexOf(B)<0&&I.push("on "+B),D&&I.push((/^on /.test(I[I.length-1])?"":"on ")+D),F&&(s=/ ([\d.+]+)$/.exec(F),u=s&&"/"==F.charAt(F.length-s[0].length-1),F={architecture:32,family:s&&!u?F.replace(s[0],""):F,version:s?s[1]:null,toString:function(){var t=this.version;return this.family+(t&&!u?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(C))&&!/\bi686\b/i.test(C)?(F&&(F.architecture=64,F.family=F.family.replace(RegExp(" *"+s),"")),N&&(/\bWOW64\b/i.test(e)||j&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&I.unshift("32-bit")):F&&/^OS X/.test(F.family)&&"Chrome"==N&&parseFloat(L)>=39&&(F.architecture=64),e||(e=null);var z={};return z.description=e,z.layout=M&&M[0],z.manufacturer=B,z.name=N,z.prerelease=P,z.product=D,z.ua=e,z.version=N&&L,z.os=F||{architecture:null,family:null,version:null,toString:function(){return"null"}},z.parse=t,z.toString=function(){return this.description||""},z.version&&I.unshift(L),z.name&&I.unshift(N),F&&N&&(F!=String(F).split(" ")[0]||F!=N.split(" ")[0]&&!D)&&I.push(D?"("+F+")":"on "+F),I.length&&(z.description=I.join(" ")),z}();o&&i?h(b,(function(t,e){o[e]=t})):r.platform=b}).call(e)}(US,US.exports);var WS=Bt,zS=De,GS=is,$S=w,VS=Uy,KS=Yy;By("match",(function(t,e,n){return[function(e){var n=$S(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](GS(n))},function(t){var r=WS(this),o=GS(t),i=n(e,r,o);if(i.done)return i.value;if(!r.global)return KS(r,o);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=KS(r,o));){var f=GS(s[0]);c[u]=f,""===f&&(r.lastIndex=VS(o,zS(r.lastIndex),a)),u++}return 0===u?null:c}]}));var qS=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},YS=Bt,XS=w,JS=qS,HS=is,ZS=Yy;By("search",(function(t,e,n){return[function(e){var n=XS(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](HS(n))},function(t){var r=YS(this),o=HS(t),i=n(e,r,o);if(i.done)return i.value;var a=r.lastIndex;JS(a,0)||(r.lastIndex=0);var s=ZS(r,o);return JS(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]}));var QS=_n,tT=We,eT=Le,nT=De,rT=H,oT=Gs,iT=Bs,aT=qs("splice"),sT=Math.max,cT=Math.min,uT=9007199254740991,fT="Maximum allowed length exceeded";function lT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}QS({target:"Array",proto:!0,forced:!aT},{splice:function(t,e){var n,r,o,i,a,s,c=rT(this),u=nT(c.length),f=tT(t,u),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=u-f):(n=l-2,r=cT(sT(eT(e),0),u-f)),u+n-r>uT)throw TypeError(fT);for(o=oT(c,r),i=0;i<r;i++)(a=f+i)in c&&iT(o,i,c[a]);if(o.length=r,n<r){for(i=f;i<u-r;i++)s=i+n,(a=i+r)in c?c[s]=c[a]:delete c[s];for(i=u;i>u-r+n;i--)delete c[i-1]}else if(n>r)for(i=u-r;i>f;i--)s=i+n-1,(a=i+r-1)in c?c[s]=c[a]:delete c[s];for(i=0;i<n;i++)c[i+f]=arguments[i+2];return c.length=u-r+n,o}}),function(t){var e=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};Object.defineProperty(t,"__esModule",{value:!0});var n=al.exports,r=sl.exports,o=ul.exports,i=fl.exports,a=pl.exports,s=vl.exports,c=dl.exports,u=gl.exports,f=ml.exports,l=bl,d=yl.exports,p=Bl,h=cy.exports,v=uy.exports,y=Cy,g=Gk.exports,m=aS,b=US.exports;function w(t){return t&&"object"===Or(t)&&"default"in t?t:{default:t}}function x(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var k=w(n),S=w(r),T=w(o),E=w(i),O=w(a),_=w(s),A=w(c),R=w(u),C=w(f),I=w(l),P=w(d),j=x(h),L=x(v),M=w(g),N=x(b);function D(){}function B(){B.init.call(this)}function F(t){return void 0===t._maxListeners?B.defaultMaxListeners:t._maxListeners}function U(t,e,n){if(e)t.call(n);else for(var r=t.length,o=Y(t,r),i=0;i<r;++i)o[i].call(n)}function W(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=Y(t,o),a=0;a<o;++a)i[a].call(n,r)}function z(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=Y(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function G(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=Y(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function $(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=Y(t,o),a=0;a<o;++a)i[a].apply(n,r)}function V(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new D,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=F(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function K(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function q(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Y(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}D.prototype=Object.create(null),B.EventEmitter=B,B.usingDomains=!1,B.prototype.domain=void 0,B.prototype._events=void 0,B.prototype._maxListeners=void 0,B.defaultMaxListeners=10,B.init=function(){this.domain=null,B.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new D,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},B.prototype.getMaxListeners=function(){return F(this)},B.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:U(n,f,this);break;case 2:W(n,f,this,arguments[1]);break;case 3:z(n,f,this,arguments[1],arguments[2]);break;case 4:G(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];$(n,f,this,o)}return!0},B.prototype.addListener=function(t,e){return V(this,t,e,!1)},B.prototype.on=B.prototype.addListener,B.prototype.prependListener=function(t,e){return V(this,t,e,!0)},B.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,K(this,t,e)),this},B.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,K(this,t,e)),this},B.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new D:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new D,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},B.prototype.off=function(t,e){return this.removeListener(t,e)},B.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new D,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new D:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new D,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},B.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[],n},B.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):q.call(t,e)},B.prototype.listenerCount=q,B.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var X=j.getLogger("twilsock");function J(t,e){return["".concat((new Date).toISOString()," Twilsock ").concat(t,":")].concat(Array.from(e))}var H=function(){function t(e){R.default(this,t),C.default(this,"prefix",""),this.prefix=null!=e&&e.length>0?" "+e+":":""}return S.default(t,[{key:"setLevel",value:function(t){X.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.trace.apply(null,J("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.debug.apply(null,J("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.info.apply(null,J("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.warn.apply(null,J("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.error.apply(null,J("E",e))}}],[{key:"setLevel",value:function(t){X.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.trace.apply(null,J("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.debug.apply(null,J("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.info.apply(null,J("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.warn.apply(null,J("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];X.error.apply(null,J("E",e))}}]),t}(),Z=new H(""),Q="0.12.2",tt=function(){function t(e,n,r){R.default(this,t),C.default(this,"confirmedCapabilities",new Set),this.activeGrant=n,this._token=e;var o=r.region||"us1",i="wss://tsock.".concat(o,".twilio.com/v3/wsconnect"),a=r.twilsock||r.Twilsock||{};this.url=a.uri||i,this._continuationToken=r.continuationToken?r.continuationToken:null,this.logLevel=r.logLevel?r.logLevel:"error",this.retryPolicy=r.retryPolicy?r.retryPolicy:{min:1e3,max:12e4,randomness:.2},this.clientMetadata=r.clientMetadata?r.clientMetadata:{},this.clientMetadata.ver=Q,this.initRegistrations=r.initRegistrations?r.initRegistrations:null,this.tweaks=r.tweaks?r.tweaks:null}return S.default(t,[{key:"token",get:function(){return this._token}},{key:"continuationToken",get:function(){return this._continuationToken}},{key:"updateToken",value:function(t){this._token=t}},{key:"updateContinuationToken",value:function(t){this._continuationToken=t}}]),t}(),et=function t(e){R.default(this,t),this.id=e||"TM".concat(y.v4())};function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var rt=function(t){O.default(n,t);var e=nt(n);function n(t,r,o,i,a){var s;return R.default(this,n),s=e.call(this),C.default(T.default(s),"method","init"),s.token=t,s.continuation_token=r,s.metadata=o,s.registrations=i,s.tweaks=a,s.capabilities=["client_update","offline_storage","telemetry.v1"],s}return n}(et);function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var it=function(t){O.default(n,t);var e=ot(n);function n(t,r,o,i,a,s,c){var u;return R.default(this,n),(u=e.call(this,t)).continuationToken=r,u.continuationTokenStatus=i,u.offlineStorage=a,u.initRegistrations=s,u.debugInfo=c,u.confirmedCapabilities=o,u}return n}(et);function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var st=function(t){O.default(n,t);var e=at(n);function n(t){var r;return R.default(this,n),r=e.call(this),C.default(T.default(r),"method","update"),r.token=t,r}return n}(et);function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var ut=function(t){O.default(n,t);var e=ct(n);function n(t,r,o){var i;return R.default(this,n),i=e.call(this),C.default(T.default(i),"method","message"),i.active_grant=t,i.payload_type=r,i.http_request=o,i}return n}(et);function ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var lt=function(t){O.default(n,t);var e=ft(n);function n(t){var r;return R.default(this,n),r=e.call(this,t),C.default(T.default(r),"method","reply"),C.default(T.default(r),"payload_type","application/json"),C.default(T.default(r),"status",{code:200,status:"OK"}),r}return n}(et);function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var pt=function(t){O.default(n,t);var e=dt(n);function n(){var t;return R.default(this,n),t=e.call(this),C.default(T.default(t),"method","close"),t}return n}(et);function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var vt=function t(e,n,r,o,i,a){R.default(this,t),this.start=e,this.end=n,this.title=r,this.details=o,this.id=i,this.type=a},yt=function(t){O.default(n,t);var e=ht(n);function n(t){var r;return R.default(this,n),r=e.call(this),C.default(T.default(r),"method","telemetry.v1"),r.events=t,r}return n}(et);function gt(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})).length}function mt(t){var e=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})),n=new Uint8Array(e.length);return Array.prototype.forEach.call(e,(function(t,e){n[e]=t.charCodeAt(0)})),n}function bt(t){var e=Array.prototype.map.call(t,(function(t){return String.fromCharCode(t)})).join("").replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}));return decodeURIComponent(e)}function wt(t){return JSON.parse(bt(t))}var xt=function(){function t(){R.default(this,t)}return S.default(t,null,[{key:"parse",value:function(t){var e,n,r=new Uint8Array(t),o=function(t){for(var e="",n=0;n<t.length;++n){var r=String.fromCharCode(t[n]);if(e+=r,"\r"===r){n+=2;break}}var o=e.split(" ");return{size:n,protocol:o[0],version:o[1],headerSize:Number(o[2])}}(r);if("TWILSOCK"!==o.protocol||"V3.0"!==o.version)return Z.error("unsupported protocol: ".concat(o.protocol," ver ").concat(o.version)),null;try{e=wt(r.subarray(o.size,o.size+o.headerSize))}catch(e){return Z.error("failed to parse message header",e,t),null}if(Z.debug("message received: ",e.method),Z.trace("message received: ",e),e.payload_size>0){var i=2+o.size+o.headerSize,a=e.payload_size;if(e.hasOwnProperty("payload_type")&&0!==e.payload_type.indexOf("application/json"))0===e.payload_type.indexOf("text/plain")&&(n=bt(r.subarray(i,i+a)));else try{n=wt(r.subarray(i,i+a))}catch(e){return Z.error("failed to parse message body",e,t),null}}return{method:e.method,header:e,payload:n}}},{key:"createPacket",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.payload_size=gt(e);var n=JSON.stringify(t),r="TWILSOCK V3.0 "+gt(n);Z.debug("send request:",r+n+e);var o=mt(r+"\r\n"+n+"\r\n"+e);return o.buffer}}]),t}();function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var St=function(t){O.default(n,t);var e=kt(n);function n(t){return R.default(this,n),e.call(this,t)}return n}(M.default(Error));function Tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Et=function(t){O.default(n,t);var e=Tt(n);function n(t,r){var o;return R.default(this,n),(o=e.call(this,t)).reply=r,o}return n}(St);function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){C.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Rt=function(t){O.default(n,t);var e=At(n);function n(t){var r;return R.default(this,n),r=e.call(this),C.default(T.default(r),"newBackoff",null),C.default(T.default(r),"usedBackoff",null),C.default(T.default(r),"retrier",null),r.options=t?_t({},t):{},r}return S.default(n,[{key:"inProgress",get:function(){return!!this.retrier}},{key:"start",value:function(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}},{key:"stop",value:function(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}},{key:"modifyBackoff",value:function(t){this.newBackoff=t}},{key:"attemptFailed",value:function(){if(!this.inProgress)throw new Error("No attempt is in progress");var t,e;this.newBackoff?!this.usedBackoff||this.usedBackoff<this.newBackoff?this.createRetrier():null===(t=this.retrier)||void 0===t||t.failed(new Error):null===(e=this.retrier)||void 0===e||e.failed(new Error)}},{key:"cancel",value:function(){var t;null===(t=this.retrier)||void 0===t||t.cancel()}},{key:"cleanRetrier",value:function(){var t,e;null===(t=this.retrier)||void 0===t||t.removeAllListeners(),null===(e=this.retrier)||void 0===e||e.cancel(),this.retrier=null}},{key:"getRetryPolicy",value:function(){var t=_t({},this.options);return this.newBackoff&&(t.min=this.newBackoff,t.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),t.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,t}},{key:"createRetrier",value:function(){var t=this;this.cleanRetrier();var e=this.getRetryPolicy();this.retrier=new m.Retrier(e),this.retrier.once("attempt",(function(){var e,n;null===(e=t.retrier)||void 0===e||e.on("attempt",(function(){return t.emit("attempt")})),null===(n=t.retrier)||void 0===n||n.failed(new Error("Skipping first attempt"))})),this.retrier.on("failed",(function(e){return t.emit("failed",e)})),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start()}}]),n}(B);function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var It=function(t){O.default(o,t);var e,n,r=Ct(o);function o(t,e,n){var i;R.default(this,o),i=r.call(this),C.default(T.default(i),"disconnectingTimer",null),C.default(T.default(i),"disconnectedPromiseResolve",null),C.default(T.default(i),"terminalStates",["disconnected","rejected"]),C.default(T.default(i),"tokenExpiredSasCode",20104),C.default(T.default(i),"terminationReason","Connection is not initialized"),i.websocket=t,i.websocket.on("connected",(function(){return i.fsm.socketConnected()})),i.websocket.on("disconnected",(function(){return i.fsm.socketClosed()})),i.websocket.on("message",(function(t){return i.onIncomingMessage(t)})),i.websocket.on("socketError",(function(t){return i.emit("connectionError",{terminal:!1,message:"Socket error: ".concat(t.message),httpStatusCode:null,errorCode:null})})),i.transport=e,i.config=n,i.retrier=new Rt(n.retryPolicy),i.retrier.on("attempt",(function(){return i.retry()})),i.retrier.on("failed",(function(t){Z.warn("Retrying failed: ".concat(t.message)),i.disconnect()})),"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){Z.debug("Browser reported connectivity state: online"),i.resetBackoff(),i.fsm.systemOnline()})),window.addEventListener("offline",(function(){Z.debug("Browser reported connectivity state: offline"),i.websocket.close(),i.fsm.socketClosed()})));var a=L.factory({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:function(){i.setupSocket(),i.emit("connecting")},onEnterInitialising:function(){i.sendInit()},onLeaveInitialising:function(){i.cancelInit()},onEnterUpdating:function(){i.sendUpdate()},onLeaveUpdating:function(){i.cancelUpdate()},onEnterRetrying:function(){i.initRetry(),i.emit("connecting")},onEnterConnected:function(){i.resetBackoff(),i.onConnected()},onUserUpdateToken:function(){i.resetBackoff()},onTokenRejected:function(){i.resetBackoff(),i.closeSocket(!0),i.finalizeSocket()},onUserDisconnect:function(){i.closeSocket(!0)},onEnterDisconnecting:function(){i.startDisconnectTimer()},onLeaveDisconnecting:function(){i.cancelDisconnectTimer()},onEnterWaitSocketClosed:function(){i.startDisconnectTimer()},onLeaveWaitSocketClosed:function(){i.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:function(){i.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:function(){i.cancelDisconnectTimer()},onDisconnected:function(){i.resetBackoff(),i.finalizeSocket()},onReceiveClose:function(){i.onCloseReceived()},onReceiveOffload:function(t,e){Z.debug("onreceiveoffload: ",e),i.modifyBackoff(e.body),i.onCloseReceived()},onUnsupported:function(){i.closeSocket(!0),i.finalizeSocket()},onError:function(t,e){i.closeSocket(e),i.finalizeSocket()},onEnterState:function(t){"none"!==t.from&&i.changeState(t)},onInvalidTransition:function(t,e,n){Z.warn("FSM: unexpected transition",e,n)}}});return i.fsm=new a,i}return S.default(o,[{key:"changeState",value:function(t){Z.debug("FSM: ".concat(t.transition,": ").concat(t.from," --\x3e ").concat(t.to)),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}},{key:"resetBackoff",value:function(){Z.trace("resetBackoff"),this.retrier.stop()}},{key:"modifyBackoff",value:function(t){Z.trace("modifyBackoff",t);var e=t?t.backoff_policy:null;e&&"number"==typeof e.reconnect_min_ms&&this.retrier.modifyBackoff(e.reconnect_min_ms)}},{key:"startDisconnectTimer",value:function(){var t=this;Z.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout((function(){Z.debug("disconnecting is timed out"),t.closeSocket(!0)}),3e3)}},{key:"cancelDisconnectTimer",value:function(){Z.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}},{key:"isConnected",get:function(){return"connected"===this.state&&this.websocket.isConnected}},{key:"state",get:function(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"denied";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";default:return"disconnected"}}},{key:"initRetry",value:function(){Z.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}},{key:"retry",value:function(){"connecting"!=this.fsm.state?(Z.trace("retry"),this.websocket.close(),this.fsm.userRetry()):Z.trace("can\t retry as already connecting")}},{key:"onConnected",value:function(){this.emit("connected")}},{key:"finalizeSocket",value:function(){Z.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}},{key:"setupSocket",value:function(){Z.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}},{key:"onIncomingMessage",value:function(t){var e=xt.parse(t);if(e){var n=e.method,r=e.header,o=e.payload;if("reply"!==n&&this.confirmReceiving(r),"notification"===n)this.emit("message",r.message_type,o);else if("reply"===r.method)this.transport.processReply({id:r.id,status:r.status,header:r,body:o});else if("client_update"===r.method)"token_about_to_expire"===r.client_update_type&&this.emit("tokenAboutToExpire");else if("close"===r.method)if(308===r.status.code)Z.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:r.status.status,body:o});else if(406===r.status.code){var i="Server closed connection because can't parse protocol: ".concat(JSON.stringify(r.status));this.emitReplyConnectionError(i,r,!0),Z.error(i),this.fsm.receiveFatalClose()}else 417===r.status.code?(Z.error("Server closed connection because can't parse client reply: ".concat(JSON.stringify(r.status))),this.fsm.receiveFatalClose(r.status.status)):410===r.status.code?(Z.warn("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status),this.emit("tokenExpired")):401===r.status.code?(Z.error("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status)):(Z.warn("unexpected message: ",r.status),this.fsm.receiveOffload({status:r.status.status,body:null}))}}},{key:"sendInit",value:(n=k.default(I.default.mark((function t(){var e,n;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Z.trace("sendInit"),t.prev=1,this.emit("beforeSendInit"),t.next=5,this.transport.sendInit();case 5:e=t.sent,this.config.updateContinuationToken(e.continuationToken),this.config.confirmedCapabilities=e.confirmedCapabilities,this.fsm.initSuccess(e),this.emit("initialized",e),this.emit("tokenUpdated"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),t.t0 instanceof Et?(n=!1,Z.warn("Init rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),this.emit("sendInitFailed"),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(n=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.initError(!0)):500===t.t0.reply.status.code?this.fsm.initError(!1):this.fsm.initError(!0),this.emitReplyConnectionError(t.t0.message,t.t0.reply,n)):(this.terminationReason=t.t0.message,this.emit("connectionError",{terminal:!0,message:"Unknown error during connection initialisation: ".concat(t.t0.message,"\n").concat(JSON.stringify(t.t0,null,2)),httpStatusCode:null,errorCode:null}),this.fsm.initError(!0)),this.emit("tokenUpdated",t.t0);case 17:case"end":return t.stop()}}),t,this,[[1,13]])}))),function(){return n.apply(this,arguments)})},{key:"sendUpdate",value:(e=k.default(I.default.mark((function t(){var e,n,r;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Z.trace("sendUpdate"),e=new st(this.config.token),t.prev=2,t.next=5,this.transport.sendWithReply(e);case 5:n=t.sent,this.fsm.updateSuccess(n.body),this.emit("tokenUpdated"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0 instanceof Et?(r=!1,Z.warn("Token update rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(r=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.updateError(t.t0.reply.status)):this.fsm.updateError(t.t0.reply.status),this.emitReplyConnectionError(t.t0.message,t.t0.reply,r)):(this.emit("error",!1,t.t0.message,null,null),this.fsm.updateError(t.t0)),this.emit("tokenUpdated",t.t0);case 14:case"end":return t.stop()}}),t,this,[[2,10]])}))),function(){return e.apply(this,arguments)})},{key:"emitReplyConnectionError",value:function(t,e,n){var r=e.status&&e.status.description?e.status.description:t,o=e.status.code,i=e.status&&e.status.errorCode?e.status.errorCode:null;n&&(this.terminationReason=r),this.emit("connectionError",{terminal:n,message:"Connection error: ".concat(r),httpStatusCode:o,errorCode:i})}},{key:"cancelInit",value:function(){Z.trace("cancelInit")}},{key:"cancelUpdate",value:function(){Z.trace("cancelUpdate")}},{key:"confirmReceiving",value:function(t){Z.trace("confirmReceiving");try{this.transport.send(new lt(t.id))}catch(t){Z.debug("failed to confirm packet receiving",t)}}},{key:"closeSocket",value:function(t){var e=this;Z.trace("closeSocket (graceful: ".concat(t,")")),t&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),setTimeout((function(){return e.fsm.socketClosed()}),0)}},{key:"connect",value:function(){Z.trace("connect"),this.fsm.userConnect()}},{key:"disconnect",value:function(){var t=this;return Z.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise((function(e){t.disconnectedPromiseResolve=e,t.fsm.userDisconnect()}))}},{key:"updateToken",value:function(t){var e=this;return Z.trace("updateToken:",t),new Promise((function(t,n){e.once("tokenUpdated",(function(e){e?n(e):t()})),e.fsm.userUpdateToken()}))}},{key:"isTerminalState",get:function(){return-1!==this.terminalStates.indexOf(this.fsm.state)}},{key:"getTerminationReason",get:function(){return this.terminationReason}},{key:"onCloseReceived",value:function(){this.websocket.close()}}]),o}(B),Pt=function(){function t(){R.default(this,t)}return S.default(t,null,[{key:"getMetadata",value:function(t){var e,n,r,o,i,a,s,c,u=t&&t.clientMetadata?t.clientMetadata:{},f={env:null!==(e=N.name)&&void 0!==e?e:"unknown",envv:null!==(n=N.version)&&void 0!==n?n:"unknown",os:null!==(r=null===(o=N.os)||void 0===o?void 0:o.family)&&void 0!==r?r:"unknown",osv:null!==(i=null===(a=N.os)||void 0===a?void 0:a.version)&&void 0!==i?i:"unknown",osa:null!==(s=null===(c=N.os)||void 0===c?void 0:c.architecture)&&void 0!==s?s:"unknown",sdk:"js-default"},l={};return["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"].filter((function(t){return t in u||t in f})).forEach((function(t){return l[t]=t in u?u[t]:f[t]})),l}}]),t}();var jt=function(){function t(e,n){var r=this;R.default(this,t),this.config=n,this.activeRequests=new Map,this.channel=e,this.channel.on("reply",(function(t){return r.processReply(t)})),this.channel.on("disconnected",(function(){r.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new St("disconnected"))})),r.activeRequests.clear()}))}var e;return S.default(t,[{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"processReply",value:function(t){var e,n=this.activeRequests.get(t.id);n&&(clearTimeout(n.timeout),this.activeRequests.delete(t.id),(e=t.status.code)>=200&&e<300?n.resolve(t):(n.reject(new Et("Transport failure: "+t.status.status,t)),Z.trace("message rejected")))}},{key:"storeRequest",value:function(t,e,n){var r={resolve:e,reject:n,timeout:setTimeout((function(){Z.trace("request",t,"is timed out"),n(new St("Twilsock: request timeout: "+t))}),3e4)};this.activeRequests.set(t,r)}},{key:"shutdown",value:function(){this.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new St("Twilsock: request cancelled by user"))})),this.activeRequests.clear()}},{key:"sendInit",value:(e=k.default(I.default.mark((function t(){var e,n,r;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Z.trace("sendInit"),e=Pt.getMetadata(this.config),n=new rt(this.config.token,this.config.continuationToken,e,this.config.initRegistrations,this.config.tweaks),t.next=5,this.sendWithReply(n);case 5:return r=t.sent,t.abrupt("return",new it(r.id,r.header.continuation_token,new Set(r.header.capabilities),r.header.continuation_token_status,r.header.offline_storage,r.header.init_registrations,r.header.debug_info));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"sendClose",value:function(){var t=new pt;this.send(t)}},{key:"sendWithReply",value:function(t,e){var n=this;return new Promise((function(r,o){var i=n.send(t,e);n.storeRequest(i,r,o)}))}},{key:"send",value:function(t,e){t.id=t.id||"TM".concat(y.v4());var n=xt.createPacket(t,function(t){switch(P.default(t)){case"undefined":return"";case"object":return JSON.stringify(t);default:return t}}(e));try{return this.channel.send(n),t.id}catch(e){throw Z.debug("failed to send ",t,e),Z.trace(e.stack),e}}}]),t}();function Lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Mt=function(t){O.default(r,t);var n=Lt(r);function r(t){var o;return R.default(this,r),o=n.call(this),C.default(T.default(o),"socket",null),o.url=t,o.url=t,o.WebSocket=e.WebSocket||e.MozWebSocket||{},o}return S.default(r,[{key:"isConnected",get:function(){return!!this.socket&&1===this.socket.readyState}},{key:"connect",value:function(){var t,e=this;Z.trace("connecting to socket");try{t=new this.WebSocket(this.url)}catch(t){return Z.debug("Socket error: ".concat(this.url)),void this.emit("socketError",t)}t.binaryType="arraybuffer",t.onopen=function(){Z.debug("socket opened ".concat(e.url)),e.emit("connected")},t.onclose=function(t){Z.debug("socket closed",t),e.emit("disconnected",t)},t.onerror=function(t){Z.debug("Socket error:",t),e.emit("socketError",t)},t.onmessage=function(t){e.emit("message",t.data)},this.socket=t}},{key:"send",value:function(t){return this.socket&&this.socket.send(t)}},{key:"close",value:function(){if(Z.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}}]),r}(B);function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Dt=function(t){O.default(c,t);var e,n,r,o,i,a,s=Nt(c);function c(t){var e;return R.default(this,c),(e=s.call(this)).transport=t,e.registrations=new Map,e.registrationsInProgress=new Map,e}return S.default(c,[{key:"putNotificationContext",value:(a=k.default(I.default.mark((function t(e,n){var r;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"put_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(r,n);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"deleteNotificationContext",value:(i=k.default(I.default.mark((function t(e){var n;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"delete_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(n);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"updateRegistration",value:(o=k.default(I.default.mark((function t(e,n){var r,o;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Z.debug("update registration for context",e),(r=this.registrationsInProgress.get(e))||(r=new Set,this.registrationsInProgress.set(e,r)),o=y.v4(),r.add(o),t.prev=5,t.next=8,this.putNotificationContext(e,n);case 8:Z.debug("registration attempt succeeded for context",n),r.delete(o),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registered",e)),t.next=19;break;case 13:t.prev=13,t.t0=t.catch(5),Z.warn("registration attempt failed for context",n),Z.debug(t.t0),r.delete(o),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registrationFailed",e,t.t0));case 19:case"end":return t.stop()}}),t,this,[[5,13]])}))),function(t,e){return o.apply(this,arguments)})},{key:"updateRegistrations",value:(r=k.default(I.default.mark((function t(){var e,n=this;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Z.trace("refreshing ".concat(this.registrations.size," registrations")),e=[],this.registrations.forEach((function(t,r){e.push(n.updateRegistration(r,t))})),t.next=5,Promise.all(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"setNotificationsContext",value:(n=k.default(I.default.mark((function t(e,n){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&n){t.next=2;break}throw new St("Invalid arguments provided");case 2:return this.registrations.set(e,n),t.next=5,this.updateRegistration(e,n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"removeNotificationsContext",value:(e=k.default(I.default.mark((function t(e){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registrations.has(e)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.deleteNotificationContext(e);case 4:this.transport.isConnected&&this.registrations.delete(e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),c}(B);function Bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Ft=function(t){O.default(n,t);var e=Bt(n);function n(t,r,o){var i;return R.default(this,n),(i=e.call(this,r)).status=t,i.description=r,i.body=o,i}return n}(St);function Ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var Wt=function(t){O.default(n,t);var e=Ut(n);function n(t){return R.default(this,n),e.call(this,t)}return n}(St);function zt(t,e){var n=function(t){var e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(e){var n={protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7],params:{}};if(n.search.length>0){var r=n.search.substring(1);n.params=r.split("&").map((function(t){return t.split("=")})).reduce((function(t,e){return t.hasOwnProperty(e[0])?Array.isArray(t[e[0]])?t[e[0]].push(e[1]):t[e[0]]=[t[e[0]],e[1]]:t[e[0]]=e[1],t}),{})}return n}throw new St("Incorrect URI: "+t)}(e),r={method:t,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}function Gt(t,e,n,r,o){return{to:zt(t,e),headers:n,body:r,grant:o}}var $t=function(){function t(e,n,r){R.default(this,t),this.config=r,this.transport=e,this.pendingMessages=[],this.twilsock=n}var e;return S.default(t,[{key:"saveMessage",value:function(t){var e=this;return new Promise((function(n,r){var o={message:t,resolve:n,reject:r,alreadyRejected:!1,timeout:setTimeout((function(){Z.debug("request is timed out"),r(new St("request '".concat(t.to.method,"' to '").concat(t.to.host,"' timed out"))),o.alreadyRejected=!0}),2e4)};e.pendingMessages.push(o)}))}},{key:"sendPendingMessages",value:function(){for(var t=this,e=function(){var e=t.pendingMessages[0];if(!e.alreadyRejected)try{var n=e.message;t.actualSend(n).then((function(t){return e.resolve(t)})).catch((function(t){return e.reject(t)})),clearTimeout(e.timeout)}catch(t){return Z.debug("Failed to send pending message",t),"break"}t.pendingMessages.splice(0,1)};this.pendingMessages.length>0;){if("break"===e())break}}},{key:"rejectPendingMessages",value:function(){var t=this;this.pendingMessages.forEach((function(e){e.reject(new Wt("Unable to connect: "+t.twilsock.getTerminationReason)),e.alreadyRejected=!0,clearTimeout(e.timeout)})),this.pendingMessages.splice(0,this.pendingMessages.length)}},{key:"actualSend",value:(e=k.default(I.default.mark((function t(e){var n,r,o,i,a,s,c,u;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.to,o=e.headers,i=e.body,a=null!==(n=e.grant)&&void 0!==n?n:this.config.activeGrant,s={host:r.host,path:r.path,method:r.method,params:r.params,headers:o},c=new ut(a,o["Content-Type"]||"application/json",s),Z.trace("Sending upstream message",c),t.next=9,this.transport.sendWithReply(c,i);case 9:if(u=t.sent,Z.trace("Received upstream message response",u),!((l=u)&&l.header&&l.header.http_status)||(f=u.header.http_status.code)>=200&&f<300){t.next=13;break}throw new Ft(u.header.http_status.code,u.header.http_status.status,u.body);case 13:return t.abrupt("return",{status:u.header.http_status,headers:u.header.http_headers,body:u.body});case 14:case"end":return t.stop()}var f,l}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"send",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(this.twilsock.isTerminalState)return Promise.reject(new Wt("Unable to connect: "+this.twilsock.getTerminationReason));var i=Gt(t,e,n,r,o);return this.twilsock.isConnected?this.actualSend(i):this.saveMessage(i)}}]),t}(),Vt=function(){function t(){var e=this;R.default(this,t),this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return S.default(t,[{key:"promise",get:function(){return this._promise}},{key:"update",value:function(t){this._resolve(t)}},{key:"set",value:function(t){this._resolve(t)}},{key:"fail",value:function(t){this._reject(t)}}]),t}(),Kt=function(){function t(e){R.default(this,t),this.id=e}return S.default(t,null,[{key:"create",value:function(e){if(e instanceof Object&&"storage_id"in e)return new t(e.storage_id);throw new St('Field "storage_id" is missing')}}]),t}(),qt=function(){function t(){return R.default(this,t),C.default(this,"initializedFlag","twilio_twilsock_token_storage"),C.default(this,"tokenStoragePrefix","twilio_continuation_token_"),t._instance||(this.initialize(),t._instance=this),t._instance}return S.default(t,[{key:"sessionStorage",value:function(){try{return e.sessionStorage}catch(t){return null}}},{key:"window",value:function(){try{return e.window}catch(t){return null}}},{key:"storeToken",value:function(t,e){this.canStore()&&this.sessionStorage.setItem(this.getKeyName(e),t)}},{key:"getStoredToken",value:function(t){return this.canStore()?this.sessionStorage.getItem(this.getKeyName(t)):null}},{key:"initialize",value:function(){var t=this;if(this.canStore()){this.sessionStorage.getItem(this.initializedFlag)&&this.clear(),this.sessionStorage.setItem(this.initializedFlag,"true");var e=this.sessionStorage.removeItem;this.window.addEventListener("unload",(function(){e(t.initializedFlag)}))}}},{key:"clear",value:function(){if(this.canStore()){for(var t=[],e=0;e<this.sessionStorage.length;e++){var n=this.sessionStorage.key(e);n&&0===n.indexOf(this.tokenStoragePrefix)&&t.push(n)}var r=this.sessionStorage.removeItem;t.forEach((function(t){return r(t)})),r(this.initializedFlag)}}},{key:"getKeyName",value:function(t){return"".concat(this.tokenStoragePrefix).concat(t)}},{key:"canStore",value:function(){return!!(this.sessionStorage&&this.sessionStorage.length&&this.window)}}]),t}();C.default(qt,"_instance",null);var Yt,Xt,Jt=new qt,Ht=function(){function t(e,n,r,o,i,a){R.default(this,t),this.title=e,this.details=n,this.start=r,this.type=i,this.id=a,this.end=o}return S.default(t,[{key:"toTelemetryEvent",value:function(){var t=new Date,e=this.start,n=this.end?this.end:t;if(n<e){var r=n;n=e,e=r}var o=e.getTime()-t.getTime(),i=n.getTime()-t.getTime();return new vt(o,i,this.title,this.details,this.id,this.type)}}]),t}();t.TelemetryPoint=void 0,(Yt=t.TelemetryPoint||(t.TelemetryPoint={}))[Yt.Start=0]="Start",Yt[Yt.End=1]="End",t.EventSendingLimitation=void 0,(Xt=t.EventSendingLimitation||(t.EventSendingLimitation={}))[Xt.MinEventsPortion=0]="MinEventsPortion",Xt[Xt.AnyEvents=1]="AnyEvents",Xt[Xt.AnyEventsIncludingUnfinished=2]="AnyEventsIncludingUnfinished";var Zt=function(){function e(t,n){R.default(this,e),C.default(this,"minEventsPortionToSend",50),C.default(this,"maxEventsPortionToSend",100),C.default(this,"pendingEvents",new Map),C.default(this,"readyEvents",[]),C.default(this,"hasInitializationFinished",!1),C.default(this,"_canSendTelemetry",!1),this.config=t,this.packetInterface=n}return S.default(e,[{key:"isTelemetryEnabled",get:function(){return this.config.confirmedCapabilities.has("telemetry.v1")}},{key:"canSendTelemetry",get:function(){return this._canSendTelemetry&&this.isTelemetryEnabled},set:function(e){Z.debug("TelemetryTracker.canSendTelemetry: ".concat(e," TelemetryTracker.isTelemetryEnabled: ").concat(this.isTelemetryEnabled)),this._canSendTelemetry&&!e&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=e,e&&this.sendTelemetry(t.EventSendingLimitation.AnyEvents),e&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}},{key:"addTelemetryEvent",value:function(t){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(t)}},{key:"addPartialEvent",value:function(e,n,r){Z.debug("Adding ".concat(r===t.TelemetryPoint.Start?"starting":"ending"," timepoint for '").concat(n,"' event"));var o=this.pendingEvents.has(n);if(r===t.TelemetryPoint.Start)o&&Z.debug("Overwriting starting point for '".concat(n,"' event")),this.pendingEvents.set(n,e);else{if(!o)return void Z.info("Could not find started event for '".concat(n,"' event"));this.addTelemetryEvent(this.merge(this.pendingEvents.get(n),e)),this.pendingEvents.delete(n)}}},{key:"getTelemetryToSend",value:function(e){return this.canSendTelemetry&&0!=this.readyEvents.length?e==t.EventSendingLimitation.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(e==t.EventSendingLimitation.AnyEventsIncludingUnfinished):[]}},{key:"getTelemetryPortion",value:function(t){var e=this,n=Math.min(this.readyEvents.length,this.maxEventsPortionToSend),r=this.readyEvents.splice(0,n);return t&&r.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach((function(t,n){if(!(r.length>=e.maxEventsPortionToSend)){var o=e.pendingEvents.get(n);e.pendingEvents.delete(n),r.push(new Ht("[UNFINISHED] ".concat(o.title),o.details,o.start,null,o.type,o.id))}})),r}},{key:"merge",value:function(t,e){return new Ht(e.title?e.title:t.title,e.details?e.details:t.details,t.start,e.end,e.type?e.type:t.type,e.id?e.id:t.id)}},{key:"sendTelemetryIfMinimalPortionCollected",value:function(){this.sendTelemetry(t.EventSendingLimitation.MinEventsPortion)}},{key:"sendTelemetry",value:function(t){var e=this.getTelemetryToSend(t);if(0!==e.length)try{this.packetInterface.send(new yt(e.map((function(t){return t.toTelemetryEvent()}))))}catch(t){Z.debug("Error while sending ".concat(e.length," telemetry events due to ").concat(t,"; they will be resubmitted")),this.readyEvents=this.readyEvents.concat(e)}}}]),e}();function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A.default(t);if(e){var o=A.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _.default(this,n)}}var te=function t(){R.default(this,t)};C.default(te,"TWILSOCK_CONNECT","twilsock.sdk.connect"),C.default(te,"TWILSOCK_INIT","twilsock.sdk.init"),t.TwilsockClient=function(e){O.default(l,e);var n,r,o,i,a,s,c,u,f=Qt(l);function l(e,n,r){var o;R.default(this,l),o=f.call(this),C.default(T.default(o),"version",Q),C.default(T.default(o),"offlineStorageDeferred",new Vt),r.continuationToken=r.continuationToken?r.continuationToken:Jt.getStoredToken(n);var i=o.config=new tt(e,n,r);Z.setLevel(i.logLevel);var a=new Mt(i.url),s=new jt(a,i);return o.channel=new It(a,s,i),o.registrations=new Dt(s),o.upstream=new $t(s,o.channel,i),o.telemetryTracker=new Zt(i,s),o.channel.on("initialized",(function(){return o.telemetryTracker.canSendTelemetry=!0})),a.on("disconnected",(function(){return o.telemetryTracker.canSendTelemetry=!1})),o.registrations.on("registered",(function(t){return o.emit("registered",t)})),o.channel.on("message",(function(t,e){return setTimeout((function(){return o.emit("message",t,e)}),0)})),o.channel.on("stateChanged",(function(t){return setTimeout((function(){return o.emit("stateChanged",t)}),0)})),o.channel.on("connectionError",(function(t){return setTimeout((function(){return o.emit("connectionError",t)}),0)})),o.channel.on("tokenAboutToExpire",(function(){return setTimeout((function(){return o.emit("tokenAboutToExpire")}),0)})),o.channel.on("tokenExpired",(function(){return setTimeout((function(){return o.emit("tokenExpired")}),0)})),o.channel.on("connected",(function(){return o.registrations.updateRegistrations()})),o.channel.on("connected",(function(){return o.upstream.sendPendingMessages()})),o.channel.on("connected",(function(){return setTimeout((function(){return o.emit("connected")}),0)})),o.channel.on("beforeConnect",(function(){return o.telemetryTracker.addPartialEvent(new Ht("Establish WebSocket connection","",new Date),te.TWILSOCK_CONNECT,t.TelemetryPoint.Start)})),o.channel.on("connected",(function(){return o.telemetryTracker.addPartialEvent(new Ht("Establish WebSocket connection","",new Date,new Date),te.TWILSOCK_CONNECT,t.TelemetryPoint.End)})),o.channel.on("beforeSendInit",(function(){return o.telemetryTracker.addPartialEvent(new Ht("Send Twilsock init","",new Date),te.TWILSOCK_INIT,t.TelemetryPoint.Start)})),o.channel.on("initialized",(function(){return o.telemetryTracker.addPartialEvent(new Ht("Send Twilsock init","Succeeded",new Date,new Date),te.TWILSOCK_INIT,t.TelemetryPoint.End)})),o.channel.on("sendInitFailed",(function(){return o.telemetryTracker.addPartialEvent(new Ht("Send Twilsock init","Failed",new Date,new Date),te.TWILSOCK_INIT,t.TelemetryPoint.End)})),o.channel.on("initialized",(function(t){o.handleStorageId(n,t),Jt.storeToken(t.continuationToken,n),setTimeout((function(){return o.emit("initialized",t)}),0)})),o.channel.on("disconnected",(function(){return setTimeout((function(){return o.emit("disconnected")}),0)})),o.channel.on("disconnected",(function(){return o.upstream.rejectPendingMessages()})),o.channel.on("disconnected",(function(){return o.offlineStorageDeferred.fail(new St("Client disconnected"))})),o.offlineStorageDeferred.promise.catch((function(){})),o}return S.default(l,[{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Z.debug("Emitting ".concat(t.toString(),"(").concat(r.map((function(t){return JSON.stringify(t)})).join(", "),")")),(e=E.default(A.default(l.prototype),"emit",this)).call.apply(e,[this,t].concat(r))}},{key:"handleStorageId",value:function(t,e){if(e.offlineStorage)if(e.offlineStorage.hasOwnProperty(t))try{this.offlineStorageDeferred.set(Kt.create(e.offlineStorage[t])),Z.debug("Offline storage for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage[t]),"."))}catch(n){this.offlineStorageDeferred.fail(new St("Failed to parse offline storage for ".concat(t," ").concat(JSON.stringify(e.offlineStorage[t]),". ").concat(n,".")))}else this.offlineStorageDeferred.fail(new St("No offline storage id for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage))));else this.offlineStorageDeferred.fail(new St("No offline storage id"))}},{key:"storageId",value:function(){return this.offlineStorageDeferred.promise}},{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"state",get:function(){return this.channel.state}},{key:"updateToken",value:(u=k.default(I.default.mark((function t(e){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Z.trace("updating token '".concat(e,"'")),this.config.token!==e){t.next=3;break}return t.abrupt("return");case 3:return this.config.updateToken(e),t.next=6,this.channel.updateToken(e);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"setNotificationsContext",value:(c=k.default(I.default.mark((function t(e,n){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.setNotificationsContext(e,n);case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"removeNotificationsContext",value:(s=k.default(I.default.mark((function t(e){return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.removeNotificationsContext(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"connect",value:function(){return this.channel.connect()}},{key:"disconnect",value:(a=k.default(I.default.mark((function e(){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEventsIncludingUnfinished),e.next=3,this.channel.disconnect();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"get",value:(i=k.default(I.default.mark((function e(n,r,o){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("GET",n,r,void 0,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"post",value:(o=k.default(I.default.mark((function e(n,r,o,i){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("POST",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,r){return o.apply(this,arguments)})},{key:"put",value:(r=k.default(I.default.mark((function e(n,r,o,i){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("PUT",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,o){return r.apply(this,arguments)})},{key:"delete",value:(n=k.default(I.default.mark((function e(n,r,o,i){return I.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("DELETE",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,r,o){return n.apply(this,arguments)})},{key:"addTelemetryEvent",value:function(t){this.telemetryTracker.addTelemetryEvent(t),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"addPartialTelemetryEvent",value:function(e,n,r){this.telemetryTracker.addPartialEvent(e,n,r),r===t.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}}]),l}(B),t.TwilsockClient=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":P.default(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([p.validateConstructorTypes(p.nonEmptyString,p.nonEmptyString,[p.pureObject,"undefined",p.literal(null)]),function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":P.default(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[String,String,Object])],t.TwilsockClient);var ee=function(){function t(e){R.default(this,t),this.product=e,this.type="ers",this.notification_protocol_version=0,this.message_types=[]}return S.default(t,[{key:"populateInitRegistrations",value:function(t){var e=new Set(this.message_types);for(var n in t)e.add(t[n]);this.message_types=Array.from(e)}}]),t}();t.InitRegistration=ee,t.TelemetryEventDescription=Ht,t.TelemetryTracker=Zt,t.TransportUnavailableError=Wt,t.Twilsock=t.TwilsockClient,t.TwilsockError=St}(il);var dT=s,pT=a,hT=Bn,vT=en,yT=c,gT=H,mT=b,bT=Object.assign,wT=Object.defineProperty,xT=!bT||pT((function(){if(dT&&1!==bT({b:1},bT(wT({},"a",{enumerable:!0,get:function(){wT(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=bT({},t)[n]||hT(bT({},e)).join("")!=r}))?function(t,e){for(var n=gT(t),r=arguments.length,o=1,i=vT.f,a=yT.f;r>o;)for(var s,c=mT(arguments[o++]),u=i?hT(c).concat(i(c)):hT(c),f=u.length,l=0;f>l;)s=u[l++],dT&&!a.call(c,s)||(n[s]=c[s]);return n}:bT,kT=xT;function ST(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TT(t,e){if(t){if("string"==typeof t)return ST(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ST(t,e):void 0}}function ET(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||TT(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OT(t){return function(t){if(Array.isArray(t))return ST(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||TT(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}_n({target:"Object",stat:!0,forced:Object.assign!==kT},{assign:kT});var _T=cy.exports.getLogger("twilio-notificatiions");function AT(t,e){return["".concat((new Date).toISOString()," Twilio.Notifications ").concat(t,":")].concat(Array.from(e))}var RT=function(){function t(){xr(this,t)}return Sr(t,[{key:"setLevel",value:function(t){_T.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];_T.trace.apply(null,AT("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];_T.debug.apply(null,AT("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];_T.info.apply(null,AT("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];_T.warn.apply(null,AT("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];_T.error.apply(null,AT("E",e))}}]),t}(),CT=new RT;function IT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rr(t);if(e){var o=Rr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ar(this,n)}}var PT=Sr((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;xr(this,t),this.token=e,this.notificationId=n,this.messageTypes=r}));function jT(t,e){var n=new Set;return t.notificationId!==e.notificationId&&n.add("notificationId"),t.token!==e.token&&n.add("token"),function(t,e){return[].concat(OT(OT(t).filter((function(t){return!e.has(t)}))),OT(OT(e).filter((function(e){return!t.has(e)}))))}(t.messageTypes,e.messageTypes).length>0&&n.add("messageType"),[n.size>0,n]}var LT=function(t){Er(r,t);var e,n=IT(r);function r(t){var e;return xr(this,r),lT(_r(e=n.call(this)),"desiredState",new PT),lT(_r(e),"currentState",new PT),lT(_r(e),"_hasActiveAttempt",!1),e.channelType=t,e}return Sr(r,[{key:"setNotificationId",value:function(t){this.desiredState.notificationId=t}},{key:"isActive",value:function(){return""!==this.desiredState.notificationId}},{key:"subscribe",value:function(t){this.desiredState.messageTypes.has(t)?CT.debug("message type '".concat(t,"' for channel ").concat(this.channelType," is already registered")):this.desiredState.messageTypes.add(t)}},{key:"unsubscribe",value:function(t){this.desiredState.messageTypes.has(t)&&this.desiredState.messageTypes.delete(t)}},{key:"updateToken",value:function(t){this.desiredState.token=t}},{key:"commitChanges",value:(e=wr(ao.mark((function t(){var e,n,r,o,i,a;return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._hasActiveAttempt){t.next=3;break}throw CT.error("One registration attempt is already in progress"),new Error("One registration attempt is already in progress");case 3:if(e=jT(this.desiredState,this.currentState),n=ET(e,2),r=n[0],o=n[1],r){t.next=6;break}return t.abrupt("return");case 6:if(this.currentState.notificationId||o.delete("notificationId"),CT.trace("Persisting ".concat(this.channelType," registration"),o,this.desiredState),t.prev=8,this._hasActiveAttempt=!0,(i=new PT).token=this.desiredState.token,i.notificationId=this.desiredState.notificationId,i.messageTypes=new Set(this.desiredState.messageTypes),!(i.messageTypes.size>0)){t.next=24;break}return t.next=17,this.updateRegistration(i,o);case 17:a=t.sent,this.currentState.token=a.token,this.currentState.notificationId=a.notificationId,this.currentState.messageTypes=new Set(a.messageTypes),this.emit("stateChanged",this.channelType,"registered",this.currentState),t.next=30;break;case 24:return t.next=26,this.removeRegistration();case 26:this.currentState.token=i.token,this.currentState.notificationId=i.notificationId,this.currentState.messageTypes.clear(),this.emit("stateChanged",this.channelType,"unregistered",this.currentState);case 30:t.next=35;break;case 32:throw t.prev=32,t.t0=t.catch(8),t.t0;case 35:return t.prev=35,this._hasActiveAttempt=!1,t.finish(35);case 38:case"end":return t.stop()}}),t,this,[[8,32,35,38]])}))),function(){return e.apply(this,arguments)})}]),r}(Yf);function MT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rr(t);if(e){var o=Rr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ar(this,n)}}var NT={min:2e3,max:12e4,randomness:.2},DT=function(t){Er(i,t);var e,n,r,o=MT(i);function i(t,e,n,r){var a;return xr(this,i),lT(_r(a=o.call(this,t)),"registrationId",null),a.context=e,a.twilsock=n,a.registrarUrl=r,a}return Sr(i,[{key:"updateRegistration",value:(r=wr(ao.mark((function t(e,n){var r,o,i,a,s,c=this;return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.has("notificationId")){t.next=3;break}return t.next=3,this.removeRegistration();case 3:if(e.notificationId&&e.notificationId.length){t.next=6;break}throw CT.error("No push notification ID for registration"),new Error("No push notification ID for registration");case 6:return CT.trace("Registering",this.channelType,e),r={endpoint_platform:this.context.platform,channel_type:this.channelType,version:this.context.protocolVersion.toString(),message_types:Array.from(e.messageTypes),data:{registration_id:e.notificationId}},o=this.context.productId,i="".concat(this.registrarUrl,"?productId=").concat(o),a={"Content-Type":"application/json"},CT.trace("Creating registration for channel ".concat(this.channelType)),t.prev=12,t.next=15,new FS(NT).run((function(){return c.twilsock.post(i,a,r,o)}));case 15:s=t.sent,this.registrationId=s.body.id,CT.debug("Registration created: ",s),t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(12),CT.error("Registration failed: ",t.t0),t.t0;case 24:return t.abrupt("return",e);case 25:case"end":return t.stop()}}),t,this,[[12,20]])}))),function(t,e){return r.apply(this,arguments)})},{key:"removeRegistration",value:(n=wr(ao.mark((function t(){var e,n,r,o=this;return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registrationId){t.next=2;break}return t.abrupt("return");case 2:return e=this.context.productId,n="".concat(this.registrarUrl,"/").concat(this.registrationId,"?productId=").concat(e),r={"Content-Type":"application/json"},CT.trace("Removing registration for ".concat(this.channelType)),t.prev=6,t.next=9,new FS(Object.assign(NT,{maxAttemptsCount:3})).run((function(){return o.twilsock.delete(n,r,{},e)}));case 9:this.registrationId=null,this.currentState.notificationId="",CT.debug("Registration removed for ".concat(this.channelType)),t.next=18;break;case 14:throw t.prev=14,t.t0=t.catch(6),CT.error("Failed to remove registration ",this.channelType,t.t0),t.t0;case 18:case"end":return t.stop()}}),t,this,[[6,14]])}))),function(){return n.apply(this,arguments)})},{key:"sendDeviceRemoveRequest",value:(e=wr(ao.mark((function t(e){var n,r,o,i,a=this;return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e){t.next=2;break}throw new Error("Empty registration ID");case 2:return n=this.context.productId,r="".concat(this.registrarUrl,"?productId=").concat(n),o={"Content-Type":"application/json"},i={binding_type:this.channelType,address:e},t.prev=6,CT.trace("Removing old registrations for ".concat(this.channelType)),t.next=10,new FS(Object.assign(NT,{maxAttemptsCount:3})).run((function(){return a.twilsock.delete(r,o,i,n)}));case 10:this.registrationId=null,this.currentState.notificationId="",CT.debug("Registration removed for ".concat(this.channelType)),t.next=19;break;case 15:throw t.prev=15,t.t0=t.catch(6),CT.error("Failed to remove registration ",this.channelType,t.t0),t.t0;case 19:case"end":return t.stop()}}),t,this,[[6,15]])}))),function(t){return e.apply(this,arguments)})}]),i}(LT);function BT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rr(t);if(e){var o=Rr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ar(this,n)}}var FT,UT=function(t){Er(i,t);var e,n,r,o=BT(i);function i(t,e,n){var r;return xr(this,i),lT(_r(r=o.call(this,"twilsock")),"contextId",Cy.v4()),r.productId=t,r.platform=e,r.twilsock=n,r}return Sr(i,[{key:"updateRegistration",value:(r=wr(ao.mark((function t(e,n){var r,o;return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.has("messageType")){t.next=2;break}return t.abrupt("return",e);case 2:return r=Array.from(e.messageTypes),o={product_id:this.productId,notification_protocol_version:4,endpoint_platform:this.platform,message_types:r},t.prev=4,t.next=7,this.twilsock.setNotificationsContext(this.contextId,o);case 7:t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(4),CT.error("Failed to update twilsock notification context: ".concat(t.t0)),t.t0;case 13:return t.abrupt("return",e);case 14:case"end":return t.stop()}}),t,this,[[4,9]])}))),function(t,e){return r.apply(this,arguments)})},{key:"removeRegistration",value:(n=wr(ao.mark((function t(){return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.twilsock.removeNotificationsContext(this.contextId);case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),CT.error("Failed to remove twilsock notification context: ".concat(t.t0)),t.t0;case 9:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(){return n.apply(this,arguments)})},{key:"sendDeviceRemoveRequest",value:(e=wr(ao.mark((function t(e){return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]),i}(LT);function WT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rr(t);if(e){var o=Rr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ar(this,n)}}var zT=ny("apn","fcm","twilsock");return t.Notifications=FT=function(t){Er(i,t);var e,n,r,o=WT(i);function i(t){var e,n,r,a,s,c,u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xr(this,i),u=o.call(this),f.logLevel=null!==(e=f.logLevel)&&void 0!==e?e:"error",CT.setLevel(f.logLevel);var l=null!==(n=f.productId)&&void 0!==n?n:"notifications",d=!f.twilsockClient,p=f.twilsockClient=null!==(r=f.twilsockClient)&&void 0!==r?r:new il.TwilsockClient(t,l,f),h=null!==(a=f.notifications)&&void 0!==a?a:{},v=null!==(s=null!==(c=h.region)&&void 0!==c?c:f.region)&&void 0!==s?s:"us1",y="https://ers.".concat(v,".twilio.com/v1/registrations"),g=h.ersUrl||y;u.connectors=new Map;var m=FT._detectPlatform();return u.connectors.set("apn",new DT("apn",{protocolVersion:4,productId:l,platform:m},p,g)),u.connectors.set("fcm",new DT("fcm",{protocolVersion:3,productId:l,platform:m},p,g)),u.connectors.set("twilsock",new UT(l,m,p)),p.on("stateChanged",(function(t){return u.emit("transportState",t)})),u._connector("twilsock").on("stateChanged",(function(t,e,n){return u.emit("stateChanged",t,e,n)})),u._connector("apn").on("stateChanged",(function(t,e,n){return u.emit("stateChanged",t,e,n)})),u._connector("fcm").on("stateChanged",(function(t,e,n){return u.emit("stateChanged",t,e,n)})),p.on("message",(function(t,e){return u._routeMessage(t,e)})),u.updateToken(t),d&&(p.connect(),u.twilsock=p),u}return Sr(i,[{key:"shutdown",value:(r=wr(ao.mark((function t(){return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectors.clear(),!this.twilsock){t.next=4;break}return t.next=4,this.twilsock.disconnect();case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"setPushRegistrationId",value:function(t,e){CT.debug("Set ".concat(t," push registration id '").concat(e,"'")),this._connector(t).setNotificationId(e)}},{key:"subscribe",value:function(t,e){CT.debug("Add ".concat(t," subscriptions for message type ").concat(e)),this._connector(t).subscribe(e)}},{key:"unsubscribe",value:function(t,e){CT.debug("Remove ".concat(t," subscriptions for message type ").concat(e)),this._connector(t).unsubscribe(e)}},{key:"updateToken",value:function(t){this.connectors.forEach((function(e){return e.updateToken(t)}))}},{key:"commitChanges",value:(n=wr(ao.mark((function t(){var e;return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],this.connectors.forEach((function(t){t.isActive()&&e.push(t.commitChanges())})),t.next=4,Promise.all(e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"removeRegistrations",value:(e=wr(ao.mark((function t(e,n){return ao.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._connector(e).sendDeviceRemoveRequest(n);case 2:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"handlePushNotification",value:function(t){return{messageType:t.twi_message_type,payload:t.payload}}},{key:"_routeMessage",value:function(t,e){CT.debug("Notification message arrived: ",t,e),this.emit("message",t,e)}},{key:"_connector",value:function(t){var e=this.connectors.get(t);if(!e)throw new Error("Unknown channel type: ".concat(t));return e}}],[{key:"_detectPlatform",value:function(){var t="";return"undefined"!=typeof navigator?(t="unknown",void 0!==navigator.product&&(t=navigator.product),void 0!==navigator.userAgent&&(t=navigator.userAgent)):t="web",t.substring(0,128)}}]),i}(Yf),Vf([ay(zT,ry),Kf("design:type",Function),Kf("design:paramtypes",[String,String]),Kf("design:returntype",void 0)],t.Notifications.prototype,"setPushRegistrationId",null),Vf([ay(zT,ry),Kf("design:type",Function),Kf("design:paramtypes",[String,String]),Kf("design:returntype",void 0)],t.Notifications.prototype,"subscribe",null),Vf([ay(zT,ry),Kf("design:type",Function),Kf("design:paramtypes",[String,String]),Kf("design:returntype",void 0)],t.Notifications.prototype,"unsubscribe",null),Vf([ay(ry),Kf("design:type",Function),Kf("design:paramtypes",[String]),Kf("design:returntype",void 0)],t.Notifications.prototype,"updateToken",null),Vf([sy(zT,ry),Kf("design:type",Function),Kf("design:paramtypes",[String,String]),Kf("design:returntype",Promise)],t.Notifications.prototype,"removeRegistrations",null),t.Notifications=FT=Vf([iy(ry,[oy,"undefined",ny(null)]),Kf("design:paramtypes",[String,Object])],t.Notifications),Object.defineProperty(t,"__esModule",{value:!0}),t}({});
