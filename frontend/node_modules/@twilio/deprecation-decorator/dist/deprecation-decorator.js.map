{"version":3,"file":"deprecation-decorator.js","sources":["../src/deprecation-decorator.ts"],"sourcesContent":["import log from \"loglevel\";\n\nexport const deprecated = (\n  oldName: string,\n  newName?: string,\n  link?: string\n) => {\n  return (\n    target: unknown,\n    propertyKey: string,\n    descriptor: PropertyDescriptor\n  ): void => {\n    if (\n      typeof descriptor.value !== \"function\" &&\n      descriptor?.get === undefined\n    ) {\n      throw new Error(\n        \"The deprecated decorator can only be applied to methods or getters\"\n      );\n    }\n\n    if (typeof descriptor.value === \"function\") {\n      const originalMethod = descriptor.value;\n\n      descriptor.value = function (...args: unknown[]) {\n        deprecationWarning(\n          `The method ${oldName} is deprecated${\n            newName ? \", use \" + newName + \" instead\" : \"\"\n          }${link ? \", \" + link : \".\"}`\n        );\n        return originalMethod.apply(this, args);\n      };\n      return;\n    }\n\n    const originalGet = descriptor.get;\n\n    descriptor.get = function () {\n      deprecationWarning(\n        `The getter ${oldName} is deprecated${\n          newName ? \", use \" + newName + \" instead\" : \"\"\n        }${link ? \", \" + link : \".\"}`\n      );\n      return originalGet?.apply(this);\n    };\n  };\n};\n\nexport const deprecationWarning = (warning?: string): void => {\n  const currentLevel = log.getLevel();\n  log.setLevel(\"warn\");\n  log.warn(warning);\n  log.setLevel(currentLevel);\n};\n"],"names":["log"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAEa,MAAA,UAAU,GAAG,CACxB,OAAe,EACf,OAAgB,EAChB,IAAa,KACX;AACF,IAAA,OAAO,CACL,MAAe,EACf,WAAmB,EACnB,UAA8B,KACtB;AACR,QAAA,IACE,OAAO,UAAU,CAAC,KAAK,KAAK,UAAU;YACtC,CAAA,UAAU,aAAV,UAAU,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAV,UAAU,CAAE,GAAG,MAAK,SAAS,EAC7B;AACA,YAAA,MAAM,IAAI,KAAK,CACb,oEAAoE,CACrE,CAAC;AACH,SAAA;AAED,QAAA,IAAI,OAAO,UAAU,CAAC,KAAK,KAAK,UAAU,EAAE;AAC1C,YAAA,MAAM,cAAc,GAAG,UAAU,CAAC,KAAK,CAAC;AAExC,YAAA,UAAU,CAAC,KAAK,GAAG,UAAU,GAAG,IAAe,EAAA;AAC7C,gBAAA,kBAAkB,CAChB,CAAA,WAAA,EAAc,OAAO,CAAA,cAAA,EACnB,OAAO,GAAG,QAAQ,GAAG,OAAO,GAAG,UAAU,GAAG,EAC9C,CAAG,EAAA,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,CAAA,CAAE,CAC9B,CAAC;gBACF,OAAO,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AAC1C,aAAC,CAAC;YACF,OAAO;AACR,SAAA;AAED,QAAA,MAAM,WAAW,GAAG,UAAU,CAAC,GAAG,CAAC;QAEnC,UAAU,CAAC,GAAG,GAAG,YAAA;AACf,YAAA,kBAAkB,CAChB,CAAA,WAAA,EAAc,OAAO,CAAA,cAAA,EACnB,OAAO,GAAG,QAAQ,GAAG,OAAO,GAAG,UAAU,GAAG,EAC9C,CAAG,EAAA,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,CAAA,CAAE,CAC9B,CAAC;YACF,OAAO,WAAW,KAAX,IAAA,IAAA,WAAW,KAAX,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,WAAW,CAAE,KAAK,CAAC,IAAI,CAAC,CAAC;AAClC,SAAC,CAAC;AACJ,KAAC,CAAC;AACJ,EAAE;AAEW,MAAA,kBAAkB,GAAG,CAAC,OAAgB,KAAU;AAC3D,IAAA,MAAM,YAAY,GAAGA,uBAAG,CAAC,QAAQ,EAAE,CAAC;AACpC,IAAAA,uBAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AACrB,IAAAA,uBAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAClB,IAAAA,uBAAG,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;AAC7B;;;;;"}