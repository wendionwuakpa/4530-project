{"version":3,"file":"lib.js","sources":["../src/deprecation-decorator.ts"],"sourcesContent":["import log from \"loglevel\";\n\nexport const deprecated = (\n  oldName: string,\n  newName?: string,\n  link?: string\n) => {\n  return (\n    target: unknown,\n    propertyKey: string,\n    descriptor: PropertyDescriptor\n  ): void => {\n    if (\n      typeof descriptor.value !== \"function\" &&\n      descriptor?.get === undefined\n    ) {\n      throw new Error(\n        \"The deprecated decorator can only be applied to methods or getters\"\n      );\n    }\n\n    if (typeof descriptor.value === \"function\") {\n      const originalMethod = descriptor.value;\n\n      descriptor.value = function (...args: unknown[]) {\n        deprecationWarning(\n          `The method ${oldName} is deprecated${\n            newName ? \", use \" + newName + \" instead\" : \"\"\n          }${link ? \", \" + link : \".\"}`\n        );\n        return originalMethod.apply(this, args);\n      };\n      return;\n    }\n\n    const originalGet = descriptor.get;\n\n    descriptor.get = function () {\n      deprecationWarning(\n        `The getter ${oldName} is deprecated${\n          newName ? \", use \" + newName + \" instead\" : \"\"\n        }${link ? \", \" + link : \".\"}`\n      );\n      return originalGet?.apply(this);\n    };\n  };\n};\n\nexport const deprecationWarning = (warning?: string): void => {\n  const currentLevel = log.getLevel();\n  log.setLevel(\"warn\");\n  log.warn(warning);\n  log.setLevel(currentLevel);\n};\n"],"names":["deprecated","oldName","newName","link","target","propertyKey","descriptor","value","get","undefined","Error","originalMethod","deprecationWarning","args","apply","originalGet","warning","currentLevel","log","getLevel","setLevel","warn"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEO,IAAMA,UAAU,GAAG,SAAbA,UAAa,CACxBC,OADwB,EAExBC,OAFwB,EAGxBC,IAHwB,EAItB;AACF,EAAA,OAAO,UACLC,MADK,EAELC,WAFK,EAGLC,UAHK,EAIG;AACR,IAAA,IACE,OAAOA,UAAU,CAACC,KAAlB,KAA4B,UAA5B,IACA,CAAA,UAAU,KAAV,IAAA,IAAA,UAAU,WAAV,GAAU,KAAA,CAAA,GAAA,UAAA,CAAEC,GAAZ,MAAoBC,SAFtB,EAGE;AACA,MAAA,MAAM,IAAIC,KAAJ,CACJ,oEADI,CAAN,CAAA;AAGD,KAAA;;AAED,IAAA,IAAI,OAAOJ,UAAU,CAACC,KAAlB,KAA4B,UAAhC,EAA4C;AAC1C,MAAA,IAAMI,cAAc,GAAGL,UAAU,CAACC,KAAlC,CAAA;;AAEAD,MAAU,UAAA,CAACC,KAAX,GAAmB,YAA4B;AAC7CK,QAAAA,kBAAkB,sBACFX,OADE,EAAA,gBAAA,CAAA,CAAA,MAAA,CAEdC,OAAO,GAAG,QAAA,GAAWA,OAAX,GAAqB,UAAxB,GAAqC,EAF9B,SAGbC,IAAI,GAAG,OAAOA,IAAV,GAAiB,GAHR,CAAlB,CAAA,CAAA;;AAD6C,QAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAAfU,IAAe,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAAfA,UAAe,IAAA,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;AAAA,SAAA;;AAM7C,QAAA,OAAOF,cAAc,CAACG,KAAf,CAAqB,IAArB,EAA2BD,IAA3B,CAAP,CAAA;AACD,OAPD,CAAA;;AAQA,MAAA,OAAA;AACD,KAAA;;AAED,IAAA,IAAME,WAAW,GAAGT,UAAU,CAACE,GAA/B,CAAA;;AAEAF,IAAU,UAAA,CAACE,GAAX,GAAiB,YAAA;AACfI,MAAAA,kBAAkB,sBACFX,OADE,EAAA,gBAAA,CAAA,CAAA,MAAA,CAEdC,OAAO,GAAG,QAAA,GAAWA,OAAX,GAAqB,UAAxB,GAAqC,EAF9B,SAGbC,IAAI,GAAG,OAAOA,IAAV,GAAiB,GAHR,CAAlB,CAAA,CAAA;AAKA,MAAOY,OAAAA,WAAP,aAAOA,WAAP,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAOA,WAAW,CAAED,KAAb,CAAmB,IAAnB,CAAP,CAAA;AACD,KAPD,CAAA;AAQD,GAtCD,CAAA;AAuCD,EA5CM;IA8CMF,kBAAkB,GAAG,SAArBA,kBAAqB,CAACI,OAAD,EAA2B;AAC3D,EAAA,IAAMC,YAAY,GAAGC,uBAAG,CAACC,QAAJ,EAArB,CAAA;AACAD,EAAGA,uBAAA,CAACE,QAAJ,CAAa,MAAb,CAAA,CAAA;AACAF,EAAGA,uBAAA,CAACG,IAAJ,CAASL,OAAT,CAAA,CAAA;AACAE,EAAGA,uBAAA,CAACE,QAAJ,CAAaH,YAAb,CAAA,CAAA;AACD;;;;;"}