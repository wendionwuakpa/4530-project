{"version":3,"file":"rest-paginator.js","sources":["../src/rest-paginator.ts"],"sourcesContent":["import { Paginator } from \"./interfaces/paginator\";\n\ninterface PaginatorState<T> {\n  source: (token: string) => Promise<RestPaginator<T>>;\n  nextToken: string;\n  prevToken: string;\n  items: T[];\n}\n\n/**\n * Pagination helper class.\n */\nclass RestPaginator<T> implements Paginator<T> {\n  private state: PaginatorState<T>;\n\n  /**\n   * Indicates the existence of the next page.\n   */\n  public get hasNextPage(): boolean {\n    return !!this.state.nextToken;\n  }\n\n  /**\n   * Indicates the existence of the previous page\n   */\n  public get hasPrevPage(): boolean {\n    return !!this.state.prevToken;\n  }\n\n  /**\n   * Array of elements on the current page.\n   */\n  public get items(): T[] {\n    return this.state.items;\n  }\n\n  /**\n   * @internal\n   */\n  constructor(items, source, prevToken, nextToken) {\n    this.state = {\n      prevToken,\n      nextToken,\n      source,\n      items,\n    };\n  }\n\n  /**\n   * Request the next page. Does not modify the existing object.\n   */\n  nextPage(): Promise<RestPaginator<T>> {\n    return this.hasNextPage\n      ? this.state.source(this.state.nextToken)\n      : Promise.reject(new Error(\"No next page\"));\n  }\n\n  /**\n   * Request the previous page. Does not modify the existing object.\n   */\n  prevPage(): Promise<RestPaginator<T>> {\n    return this.hasPrevPage\n      ? this.state.source(this.state.prevToken)\n      : Promise.reject(new Error(\"No previous page\"));\n  }\n}\n\nexport { RestPaginator };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;;AAEG;AACH,MAAM,aAAa,CAAA;AAwBjB;;AAEG;AACH,IAAA,WAAA,CAAY,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAA;QAC7C,IAAI,CAAC,KAAK,GAAG;YACX,SAAS;YACT,SAAS;YACT,MAAM;YACN,KAAK;SACN,CAAC;KACH;AA/BD;;AAEG;AACH,IAAA,IAAW,WAAW,GAAA;AACpB,QAAA,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;KAC/B;AAED;;AAEG;AACH,IAAA,IAAW,WAAW,GAAA;AACpB,QAAA,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;KAC/B;AAED;;AAEG;AACH,IAAA,IAAW,KAAK,GAAA;AACd,QAAA,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;KACzB;AAcD;;AAEG;IACH,QAAQ,GAAA;QACN,OAAO,IAAI,CAAC,WAAW;AACrB,cAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;cACvC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;KAC/C;AAED;;AAEG;IACH,QAAQ,GAAA;QACN,OAAO,IAAI,CAAC,WAAW;AACrB,cAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;cACvC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC;KACnD;AACF;;;;"}